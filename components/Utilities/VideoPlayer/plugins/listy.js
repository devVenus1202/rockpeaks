/*!
 * Listy for JW Player ~ version 1.0 ~ July 2014, Copyright (c) James Herrieven ~ http://powered-by-haiku.co.uk
 * A JW Player plugin providing feature rich and customisable playlists
 * Licensed under The MIT License.
 * v1.1 ~ August 2014
 * v1.2 ~ 22 September 2014
 * v1.3 ~ 14 October 2014
 * v1.4 ~ 22 October 2014
 * v1.5 ~ 03 November 2014
 * v1.6 ~ 25 January 2015
 * v1.7 ~ 18 May 2015
 * v1.8 ~ 04 June 2015
 * v1.9 ~ 18 June 2015
 * v1.10 ~ 7 July 2015
 * v1.11 ~ 17 July 2015
 * v1.12 ~ 4 August 2015
 * v1.13 ~ 17 December 2015 ~ Added sort order to Tubey playlists, fixed JW7 skin issue
 * v1.14 ~ 31 March 2016 + Fixed issue with duplicate playlist placeholder + updated JW7 flash rendering check
 * v1.15 ~ 11 October 2016 ~ Updated Media Tags processing (https://github.com/aadsm/jsmediatags)
 * v1.16 ~ 17 November 2016 ~ Added fix to cater for additional JW7.5 "onplaylist" event + update to cater for JW7.7 "Up next" function  
 * v1.17 ~ 21 November 2016 ~ Added "onItemSelect" event for detecting a user action on the playlist
 */

function y(h,g,b){var c=g||0,d=0;"string"==typeof h?(d=b||h.length,this.a=function(a){return h.charCodeAt(a+c)&255}):"unknown"==typeof h&&(d=b||IEBinary_getLength(h),this.a=function(a){return IEBinary_getByteAt(h,a+c)});this.l=function(a,f){for(var v=Array(f),b=0;b<f;b++)v[b]=this.a(a+b);return v};this.h=function(){return d};this.d=function(a,f){return 0!=(this.a(a)&1<<f)};this.w=function(a){a=(this.a(a+1)<<8)+this.a(a);0>a&&(a+=65536);return a};this.i=function(a){var f=this.a(a),b=this.a(a+1),d=
this.a(a+2);a=this.a(a+3);f=(((f<<8)+b<<8)+d<<8)+a;0>f&&(f+=4294967296);return f};this.o=function(a){var f=this.a(a),b=this.a(a+1);a=this.a(a+2);f=((f<<8)+b<<8)+a;0>f&&(f+=16777216);return f};this.c=function(a,f){for(var b=[],d=a,e=0;d<a+f;d++,e++)b[e]=String.fromCharCode(this.a(d));return b.join("")};this.e=function(a,b,d){a=this.l(a,b);switch(d.toLowerCase()){case "utf-16":case "utf-16le":case "utf-16be":b=d;var l,e=0,c=1;d=0;l=Math.min(l||a.length,a.length);254==a[0]&&255==a[1]?(b=!0,e=2):255==
a[0]&&254==a[1]&&(b=!1,e=2);b&&(c=0,d=1);b=[];for(var m=0;e<l;m++){var g=a[e+c],k=(g<<8)+a[e+d],e=e+2;if(0==k)break;else 216>g||224<=g?b[m]=String.fromCharCode(k):(g=(a[e+c]<<8)+a[e+d],e+=2,b[m]=String.fromCharCode(k,g))}a=new String(b.join(""));a.g=e;break;case "utf-8":l=0;e=Math.min(e||a.length,a.length);239==a[0]&&187==a[1]&&191==a[2]&&(l=3);c=[];for(d=0;l<e&&(b=a[l++],0!=b);d++)128>b?c[d]=String.fromCharCode(b):194<=b&&224>b?(m=a[l++],c[d]=String.fromCharCode(((b&31)<<6)+(m&63))):224<=b&&240>
b?(m=a[l++],k=a[l++],c[d]=String.fromCharCode(((b&255)<<12)+((m&63)<<6)+(k&63))):240<=b&&245>b&&(m=a[l++],k=a[l++],g=a[l++],b=((b&7)<<18)+((m&63)<<12)+((k&63)<<6)+(g&63)-65536,c[d]=String.fromCharCode((b>>10)+55296,(b&1023)+56320));a=new String(c.join(""));a.g=l;break;default:e=[];c=c||a.length;for(l=0;l<c;){d=a[l++];if(0==d)break;e[l-1]=String.fromCharCode(d)}a=new String(e.join(""));a.g=l}return a};this.f=function(a,b){b()}}var B=document.createElement("script");B.type="text/vbscript";
B.textContent="Function IEBinary_getByteAt(strBinary, iOffset)\r\n\tIEBinary_getByteAt = AscB(MidB(strBinary,iOffset+1,1))\r\nEnd Function\r\nFunction IEBinary_getLength(strBinary)\r\n\tIEBinary_getLength = LenB(strBinary)\r\nEnd Function\r\n";document.getElementsByTagName("head")[0].appendChild(B);function C(h,g,b){function c(a,b,e,c,f,g){var k=d();k?("undefined"===typeof g&&(g=!0),b&&("undefined"!=typeof k.onload?(k.onload=function(){"200"==k.status||"206"==k.status?(k.fileSize=f||k.getResponseHeader("Content-Length"),b(k)):e&&e({error:"xhr",xhr:k});k=null},e&&(k.onerror=function(){e({error:"xhr",xhr:k});k=null})):k.onreadystatechange=function(){4==k.readyState&&("200"==k.status||"206"==k.status?(k.fileSize=f||k.getResponseHeader("Content-Length"),b(k)):e&&e({error:"xhr",xhr:k}),k=null)}),
k.open("GET",a,g),k.overrideMimeType&&k.overrideMimeType("text/plain; charset=x-user-defined"),c&&k.setRequestHeader("Range","bytes="+c[0]+"-"+c[1]),k.setRequestHeader("If-Modified-Since","Sat, 1 Jan 1970 00:00:00 GMT"),k.send(null)):e&&e({error:"Unable to create XHR object"})}function d(){var a=null;window.XMLHttpRequest?a=new XMLHttpRequest:window.ActiveXObject&&(a=new ActiveXObject("Microsoft.XMLHTTP"));return a}function a(a,b,e){var c=d();c?(b&&("undefined"!=typeof c.onload?(c.onload=function(){"200"==
c.status||"206"==c.status?b(this):e&&e({error:"xhr",xhr:c});c=null},e&&(c.onerror=function(){e({error:"xhr",xhr:c});c=null})):c.onreadystatechange=function(){4==c.readyState&&("200"==c.status||"206"==c.status?b(this):e&&e({error:"xhr",xhr:c}),c=null)}),c.open("HEAD",a,!0),c.send(null)):e&&e({error:"Unable to create XHR object"})}function f(a,d){var e,f;function g(a){var b=~~(a[0]/e)-f;a=~~(a[1]/e)+1+f;0>b&&(b=0);a>=blockTotal&&(a=blockTotal-1);return[b,a]}function h(f,g){for(;n[f[0]];)if(f[0]++,f[0]>
f[1]){g&&g();return}for(;n[f[1]];)if(f[1]--,f[0]>f[1]){g&&g();return}var m=[f[0]*e,(f[1]+1)*e-1];c(a,function(a){parseInt(a.getResponseHeader("Content-Length"),10)==d&&(f[0]=0,f[1]=blockTotal-1,m[0]=0,m[1]=d-1);a={data:a.N||a.responseText,offset:m[0]};for(var b=f[0];b<=f[1];b++)n[b]=a;g&&g()},b,m,k,!!g)}var k,r=new y("",0,d),n=[];e=e||2048;f="undefined"===typeof f?0:f;blockTotal=~~((d-1)/e)+1;for(var q in r)r.hasOwnProperty(q)&&"function"===typeof r[q]&&(this[q]=r[q]);this.a=function(a){var b;h(g([a,
a]));b=n[~~(a/e)];if("string"==typeof b.data)return b.data.charCodeAt(a-b.offset)&255;if("unknown"==typeof b.data)return IEBinary_getByteAt(b.data,a-b.offset)};this.f=function(a,b){h(g(a),b)}}(function(){a(h,function(a){a=parseInt(a.getResponseHeader("Content-Length"),10)||-1;g(new f(h,a))},b)})()};(function(h){h.FileAPIReader=function(g,b){return function(c,d){var a=b||new FileReader;a.onload=function(a){d(new y(a.target.result))};a.readAsBinaryString(g)}}})(this);(function(h){var g=h.p={},b={},c=[0,7];g.t=function(d){delete b[d]};g.s=function(){b={}};g.B=function(d,a,f){f=f||{};(f.dataReader||C)(d,function(g){g.f(c,function(){var c="ftypM4A"==g.c(4,7)?ID4:"ID3"==g.c(0,3)?ID3v2:ID3v1;c.m(g,function(){var e=f.tags,h=c.n(g,e),e=b[d]||{},m;for(m in h)h.hasOwnProperty(m)&&(e[m]=h[m]);b[d]=e;a&&a()})})},f.onError)};g.v=function(d){if(!b[d])return null;var a={},c;for(c in b[d])b[d].hasOwnProperty(c)&&(a[c]=b[d][c]);return a};g.A=function(d,a){return b[d]?b[d][a]:
null};h.ID3=h.p;g.loadTags=g.B;g.getAllTags=g.v;g.getTag=g.A;g.clearTags=g.t;g.clearAll=g.s})(this);(function(h){var g=h.q={},b="Blues;Classic Rock;Country;Dance;Disco;Funk;Grunge;Hip-Hop;Jazz;Metal;New Age;Oldies;Other;Pop;R&B;Rap;Reggae;Rock;Techno;Industrial;Alternative;Ska;Death Metal;Pranks;Soundtrack;Euro-Techno;Ambient;Trip-Hop;Vocal;Jazz+Funk;Fusion;Trance;Classical;Instrumental;Acid;House;Game;Sound Clip;Gospel;Noise;AlternRock;Bass;Soul;Punk;Space;Meditative;Instrumental Pop;Instrumental Rock;Ethnic;Gothic;Darkwave;Techno-Industrial;Electronic;Pop-Folk;Eurodance;Dream;Southern Rock;Comedy;Cult;Gangsta;Top 40;Christian Rap;Pop/Funk;Jungle;Native American;Cabaret;New Wave;Psychadelic;Rave;Showtunes;Trailer;Lo-Fi;Tribal;Acid Punk;Acid Jazz;Polka;Retro;Musical;Rock & Roll;Hard Rock;Folk;Folk-Rock;National Folk;Swing;Fast Fusion;Bebob;Latin;Revival;Celtic;Bluegrass;Avantgarde;Gothic Rock;Progressive Rock;Psychedelic Rock;Symphonic Rock;Slow Rock;Big Band;Chorus;Easy Listening;Acoustic;Humour;Speech;Chanson;Opera;Chamber Music;Sonata;Symphony;Booty Bass;Primus;Porn Groove;Satire;Slow Jam;Club;Tango;Samba;Folklore;Ballad;Power Ballad;Rhythmic Soul;Freestyle;Duet;Punk Rock;Drum Solo;Acapella;Euro-House;Dance Hall".split(";");
g.m=function(b,d){var a=b.h();b.f([a-128-1,a],d)};g.n=function(c){var d=c.h()-128;if("TAG"==c.c(d,3)){var a=c.c(d+3,30).replace(/\0/g,""),f=c.c(d+33,30).replace(/\0/g,""),g=c.c(d+63,30).replace(/\0/g,""),l=c.c(d+93,4).replace(/\0/g,"");if(0==c.a(d+97+28))var e=c.c(d+97,28).replace(/\0/g,""),h=c.a(d+97+29);else e="",h=0;c=c.a(d+97+30);return{version:"1.1",title:a,artist:f,album:g,year:l,comment:e,track:h,genre:255>c?b[c]:""}}return{}};h.ID3v1=h.q})(this);(function(h){function g(a,b){var d=b.a(a),c=b.a(a+1),e=b.a(a+2);return b.a(a+3)&127|(e&127)<<7|(c&127)<<14|(d&127)<<21}var b=h.D={};b.b={};b.frames={BUF:"Recommended buffer size",CNT:"Play counter",COM:"Comments",CRA:"Audio encryption",CRM:"Encrypted meta frame",ETC:"Event timing codes",EQU:"Equalization",GEO:"General encapsulated object",IPL:"Involved people list",LNK:"Linked information",MCI:"Music CD Identifier",MLL:"MPEG location lookup table",PIC:"Attached picture",POP:"Popularimeter",REV:"Reverb",
RVA:"Relative volume adjustment",SLT:"Synchronized lyric/text",STC:"Synced tempo codes",TAL:"Album/Movie/Show title",TBP:"BPM (Beats Per Minute)",TCM:"Composer",TCO:"Content type",TCR:"Copyright message",TDA:"Date",TDY:"Playlist delay",TEN:"Encoded by",TFT:"File type",TIM:"Time",TKE:"Initial key",TLA:"Language(s)",TLE:"Length",TMT:"Media type",TOA:"Original artist(s)/performer(s)",TOF:"Original filename",TOL:"Original Lyricist(s)/text writer(s)",TOR:"Original release year",TOT:"Original album/Movie/Show title",
TP1:"Lead artist(s)/Lead performer(s)/Soloist(s)/Performing group",TP2:"Band/Orchestra/Accompaniment",TP3:"Conductor/Performer refinement",TP4:"Interpreted, remixed, or otherwise modified by",TPA:"Part of a set",TPB:"Publisher",TRC:"ISRC (International Standard Recording Code)",TRD:"Recording dates",TRK:"Track number/Position in set",TSI:"Size",TSS:"Software/hardware and settings used for encoding",TT1:"Content group description",TT2:"Title/Songname/Content description",TT3:"Subtitle/Description refinement",
TXT:"Lyricist/text writer",TXX:"User defined text information frame",TYE:"Year",UFI:"Unique file identifier",ULT:"Unsychronized lyric/text transcription",WAF:"Official audio file webpage",WAR:"Official artist/performer webpage",WAS:"Official audio source webpage",WCM:"Commercial information",WCP:"Copyright/Legal information",WPB:"Publishers official webpage",WXX:"User defined URL link frame",AENC:"Audio encryption",APIC:"Attached picture",COMM:"Comments",COMR:"Commercial frame",ENCR:"Encryption method registration",
EQUA:"Equalization",ETCO:"Event timing codes",GEOB:"General encapsulated object",GRID:"Group identification registration",IPLS:"Involved people list",LINK:"Linked information",MCDI:"Music CD identifier",MLLT:"MPEG location lookup table",OWNE:"Ownership frame",PRIV:"Private frame",PCNT:"Play counter",POPM:"Popularimeter",POSS:"Position synchronisation frame",RBUF:"Recommended buffer size",RVAD:"Relative volume adjustment",RVRB:"Reverb",SYLT:"Synchronized lyric/text",SYTC:"Synchronized tempo codes",
TALB:"Album/Movie/Show title",TBPM:"BPM (beats per minute)",TCOM:"Composer",TCON:"Content type",TCOP:"Copyright message",TDAT:"Date",TDLY:"Playlist delay",TENC:"Encoded by",TEXT:"Lyricist/Text writer",TFLT:"File type",TIME:"Time",TIT1:"Content group description",TIT2:"Title/songname/content description",TIT3:"Subtitle/Description refinement",TKEY:"Initial key",TLAN:"Language(s)",TLEN:"Length",TMED:"Media type",TOAL:"Original album/movie/show title",TOFN:"Original filename",TOLY:"Original lyricist(s)/text writer(s)",
TOPE:"Original artist(s)/performer(s)",TORY:"Original release year",TOWN:"File owner/licensee",TPE1:"Lead performer(s)/Soloist(s)",TPE2:"Band/orchestra/accompaniment",TPE3:"Conductor/performer refinement",TPE4:"Interpreted, remixed, or otherwise modified by",TPOS:"Part of a set",TPUB:"Publisher",TRCK:"Track number/Position in set",TRDA:"Recording dates",TRSN:"Internet radio station name",TRSO:"Internet radio station owner",TSIZ:"Size",TSRC:"ISRC (international standard recording code)",TSSE:"Software/Hardware and settings used for encoding",
TYER:"Year",TXXX:"User defined text information frame",UFID:"Unique file identifier",USER:"Terms of use",USLT:"Unsychronized lyric/text transcription",WCOM:"Commercial information",WCOP:"Copyright/Legal information",WOAF:"Official audio file webpage",WOAR:"Official artist/performer webpage",WOAS:"Official audio source webpage",WORS:"Official internet radio station homepage",WPAY:"Payment",WPUB:"Publishers official webpage",WXXX:"User defined URL link frame"};var c={title:["TIT2","TT2"],artist:["TPE1",
"TP1"],album:["TALB","TAL"],year:["TYER","TYE"],comment:["COMM","COM"],track:["TRCK","TRK"],genre:["TCON","TCO"],picture:["APIC","PIC"],lyrics:["USLT","ULT"]},d=["title","artist","album","track"];b.m=function(a,b){a.f([0,g(6,a)],b)};b.n=function(a,f){var h=0,l=a.a(h+3);if(4<l)return{version:">2.4"};var e=a.a(h+4),t=a.d(h+5,7),m=a.d(h+5,6),u=a.d(h+5,5),k=g(h+6,a),h=h+10;if(m)var r=a.i(h),h=h+(r+4);var l={version:"2."+l+"."+e,major:l,revision:e,flags:{unsynchronisation:t,extended_header:m,experimental_indicator:u},
size:k},n;if(t)n={};else{for(var k=k-10,t=a,e=f,m={},u=l.major,r=[],q=0,p;p=(e||d)[q];q++)r=r.concat(c[p]||[p]);for(e=r;h<k;){r=null;q=t;p=h;var x=null;switch(u){case 2:n=q.c(p,3);var s=q.o(p+3),w=6;break;case 3:n=q.c(p,4);s=q.i(p+4);w=10;break;case 4:n=q.c(p,4),s=g(p+4,q),w=10}if(""==n)break;h+=w+s;0>e.indexOf(n)||(2<u&&(x={message:{P:q.d(p+8,6),I:q.d(p+8,5),M:q.d(p+8,4)},k:{K:q.d(p+8+1,7),F:q.d(p+8+1,3),H:q.d(p+8+1,2),C:q.d(p+8+1,1),u:q.d(p+8+1,0)}}),p+=w,x&&x.k.u&&(g(p,q),p+=4,s-=4),x&&x.k.C||
(n in b.b?r=b.b[n]:"T"==n[0]&&(r=b.b["T*"]),r=r?r(p,s,q,x):void 0,r={id:n,size:s,description:n in b.frames?b.frames[n]:"Unknown",data:r},n in m?(m[n].id&&(m[n]=[m[n]]),m[n].push(r)):m[n]=r))}n=m}for(var z in c)if(c.hasOwnProperty(z)){a:{s=c[z];"string"==typeof s&&(s=[s]);w=0;for(h=void 0;h=s[w];w++)if(h in n){a=n[h].data;break a}a=void 0}a&&(l[z]=a)}for(var A in n)n.hasOwnProperty(A)&&(l[A]=n[A]);return l};h.ID3v2=b})(this);(function(){function h(b){var c;switch(b){case 0:c="iso-8859-1";break;case 1:c="utf-16";break;case 2:c="utf-16be";break;case 3:c="utf-8"}return c}var g="32x32 pixels 'file icon' (PNG only);Other file icon;Cover (front);Cover (back);Leaflet page;Media (e.g. lable side of CD);Lead artist/lead performer/soloist;Artist/performer;Conductor;Band/Orchestra;Composer;Lyricist/text writer;Recording Location;During recording;During performance;Movie/video screen capture;A bright coloured fish;Illustration;Band/artist logotype;Publisher/Studio logotype".split(";");
ID3v2.b.APIC=function(b,c,d,a,f){f=f||"3";a=b;var v=h(d.a(b));switch(f){case "2":var l=d.c(b+1,3);b+=4;break;case "3":case "4":l=d.e(b+1,c-(b-a),""),b+=1+l.g}f=d.a(b,1);f=g[f];v=d.e(b+1,c-(b-a),v);b+=1+v.g;return{format:l.toString(),type:f,description:v.toString(),data:d.l(b,a+c-b)}};ID3v2.b.COMM=function(b,c,d){var a=b,f=h(d.a(b)),g=d.c(b+1,3),l=d.e(b+4,c-4,f);b+=4+l.g;b=d.e(b,a+c-b,f);return{language:g,O:l.toString(),text:b.toString()}};ID3v2.b.COM=ID3v2.b.COMM;ID3v2.b.PIC=function(b,c,d,a){return ID3v2.b.APIC(b,
c,d,a,"2")};ID3v2.b.PCNT=function(b,c,d){return d.J(b)};ID3v2.b.CNT=ID3v2.b.PCNT;ID3v2.b["T*"]=function(b,c,d){var a=h(d.a(b));return d.e(b+1,c-1,a).toString()};ID3v2.b.TCON=function(b,c,d){return ID3v2.b["T*"].apply(this,arguments).replace(/^\(\d+\)/,"")};ID3v2.b.TCO=ID3v2.b.TCON;ID3v2.b.USLT=function(b,c,d){var a=b,f=h(d.a(b)),g=d.c(b+1,3),l=d.e(b+4,c-4,f);b+=4+l.g;b=d.e(b,a+c-b,f);return{language:g,G:l.toString(),L:b.toString()}};ID3v2.b.ULT=ID3v2.b.USLT})();(function(h){function g(b,a,f,h){var l=b.i(a);if(0==l)h();else{var e=b.c(a+4,4);-1<["moov","udta","meta","ilst"].indexOf(e)?("meta"==e&&(a+=4),b.f([a+8,a+8+8],function(){g(b,a+8,l-8,h)})):b.f([a+(e in c.j?0:l),a+l+8],function(){g(b,a+l,f,h)})}}function b(d,a,f,g,h){h=void 0===h?"":h+"  ";for(var e=f;e<f+g;){var t=a.i(e);if(0==t)break;var m=a.c(e+4,4);if(-1<["moov","udta","meta","ilst"].indexOf(m)){"meta"==m&&(e+=4);b(d,a,e+8,t-8,h);break}if(c.j[m]){var u=a.o(e+16+1),k=c.j[m],u=c.types[u];if("trkn"==
m)d[k[0]]=a.a(e+16+11),d.count=a.a(e+16+13);else{var m=e+16+4+4,r=t-16-4-4,n;switch(u){case "text":n=a.e(m,r,"UTF-8");break;case "uint8":n=a.w(m);break;case "jpeg":case "png":n={k:"image/"+u,data:a.l(m,r)}}d[k[0]]="comment"===k[0]?{text:n}:n}}e+=t}}var c=h.r={};c.types={0:"uint8",1:"text",13:"jpeg",14:"png",21:"uint8"};c.j={"\u00a9alb":["album"],"\u00a9art":["artist"],"\u00a9ART":["artist"],aART:["artist"],"\u00a9day":["year"],"\u00a9nam":["title"],"\u00a9gen":["genre"],trkn:["track"],"\u00a9wrt":["composer"],
"\u00a9too":["encoder"],cprt:["copyright"],covr:["picture"],"\u00a9grp":["grouping"],keyw:["keyword"],"\u00a9lyr":["lyrics"],"\u00a9cmt":["comment"],tmpo:["tempo"],cpil:["compilation"],disk:["disc"]};c.m=function(b,a){b.f([0,7],function(){g(b,0,b.h(),a)})};c.n=function(c){var a={};b(a,c,0,c.h());return a};h.ID4=h.r})(this);

(function(v){"object"===typeof exports&&"undefined"!==typeof module?module.exports=v():"function"===typeof define&&define.amd?define([],v):("undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:this).jsmediatags=v()})(function(){return function f(m,l,k){function g(a,b){if(!l[a]){if(!m[a]){var e="function"==typeof require&&require;if(!b&&e)return e(a,!0);if(d)return d(a,!0);e=Error("Cannot find module '"+a+"'");throw e.code="MODULE_NOT_FOUND",e;}e=l[a]=
{exports:{}};m[a][0].call(e.exports,function(b){var e=m[a][1][b];return g(e?e:b)},e,e.exports,f,m,l,k)}return l[a].exports}for(var d="function"==typeof require&&require,a=0;a<k.length;a++)g(k[a]);return g}({1:[function(f,m,l){},{}],2:[function(f,m,l){m.exports=XMLHttpRequest},{}],3:[function(f,m,l){function k(d,a){if("function"!==typeof a&&null!==a)throw new TypeError("Super expression must either be null or a function, not "+typeof a);d.prototype=Object.create(a&&a.prototype,{constructor:{value:d,
enumerable:!1,writable:!0,configurable:!0}});a&&(Object.setPrototypeOf?Object.setPrototypeOf(d,a):d.__proto__=a)}var g=function(){function d(a,c){for(var b=0;b<c.length;b++){var e=c[b];e.enumerable=e.enumerable||!1;e.configurable=!0;"value"in e&&(e.writable=!0);Object.defineProperty(a,e.key,e)}}return function(a,c,b){c&&d(a.prototype,c);b&&d(a,b);return a}}();f=function(d){function a(c){if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");var b;b=Object.getPrototypeOf(a).call(this);
if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");b=!b||"object"!==typeof b&&"function"!==typeof b?this:b;b._array=c;b._size=c.length;b._isInitialized=!0;return b}k(a,d);g(a,[{key:"init",value:function(a){setTimeout(a.onSuccess,0)}},{key:"loadRange",value:function(a,b){setTimeout(b.onSuccess,0)}},{key:"getByteAt",value:function(a){return this._array[a]}}],[{key:"canReadFile",value:function(a){return Array.isArray(a)||"function"===typeof Buffer&&Buffer.isBuffer(a)}}]);
return a}(f("./MediaFileReader"));m.exports=f},{"./MediaFileReader":10}],4:[function(f,m,l){function k(a,c){if("function"!==typeof c&&null!==c)throw new TypeError("Super expression must either be null or a function, not "+typeof c);a.prototype=Object.create(c&&c.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});c&&(Object.setPrototypeOf?Object.setPrototypeOf(a,c):a.__proto__=c)}var g=function(){function a(a,b){for(var e=0;e<b.length;e++){var h=b[e];h.enumerable=h.enumerable||
!1;h.configurable=!0;"value"in h&&(h.writable=!0);Object.defineProperty(a,h.key,h)}}return function(c,b,e){b&&a(c.prototype,b);e&&a(c,e);return c}}(),d=f("./ChunkedFileData");f=function(a){function c(b){if(!(this instanceof c))throw new TypeError("Cannot call a class as a function");var a;a=Object.getPrototypeOf(c).call(this);if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");a=!a||"object"!==typeof a&&"function"!==typeof a?this:a;a._blob=b;a._fileData=
new d;return a}k(c,a);g(c,[{key:"_init",value:function(b){this._size=this._blob.size;setTimeout(b.onSuccess,1)}},{key:"loadRange",value:function(b,a){var h=this,c=(this._blob.slice||this._blob.mozSlice||this._blob.webkitSlice).call(this._blob,b[0],b[1]+1),d=new FileReader;d.onloadend=function(c){c=new Uint8Array(d.result);h._fileData.addData(b[0],c);a.onSuccess()};d.onerror=d.onabort=function(b){if(a.onError)a.onError({type:"blob",info:d.error})};d.readAsArrayBuffer(c)}},{key:"getByteAt",value:function(b){return this._fileData.getByteAt(b)}}],
[{key:"canReadFile",value:function(b){return"undefined"!==typeof Blob&&b instanceof Blob||"undefined"!==typeof File&&b instanceof File}}]);return c}(f("./MediaFileReader"));m.exports=f},{"./ChunkedFileData":5,"./MediaFileReader":10}],5:[function(f,m,l){var k=function(){function g(d,a){for(var c=0;c<a.length;c++){var b=a[c];b.enumerable=b.enumerable||!1;b.configurable=!0;"value"in b&&(b.writable=!0);Object.defineProperty(d,b.key,b)}}return function(d,a,c){a&&g(d.prototype,a);c&&g(d,c);return d}}();
f=function(){function g(){if(!(this instanceof g))throw new TypeError("Cannot call a class as a function");this._fileData=[]}k(g,null,[{key:"NOT_FOUND",get:function(){return-1}}]);k(g,[{key:"addData",value:function(d,a){var c=d+a.length-1,b=this._getChunkRange(d,c);if(-1===b.startIx)this._fileData.splice(b.insertIx||0,0,{offset:d,data:a});else{var e=this._fileData[b.startIx],h=this._fileData[b.endIx],c=c<h.offset+h.data.length-1,n={offset:Math.min(d,e.offset),data:a};d>e.offset&&(e=this._sliceData(e.data,
0,d-e.offset),n.data=this._concatData(e,a));c&&(e=this._sliceData(n.data,0,h.offset-n.offset),n.data=this._concatData(e,h.data));this._fileData.splice(b.startIx,b.endIx-b.startIx+1,n)}}},{key:"_concatData",value:function(d,a){if("undefined"!==typeof ArrayBuffer&&ArrayBuffer.isView(d)){var c=new d.constructor(d.length+a.length);c.set(d,0);c.set(a,d.length);return c}return d.concat(a)}},{key:"_sliceData",value:function(d,a,c){return d.slice?d.slice(a,c):d.subarray(a,c)}},{key:"_getChunkRange",value:function(d,
a){for(var c=-1,b=-1,e=0,h=0;h<this._fileData.length;h++,e=h){var n=this._fileData[h].offset,p=n+this._fileData[h].data.length;if(a<n-1)break;if(d<=p+1&&a>=n-1){c=h;break}}if(-1===c)return{startIx:-1,endIx:-1,insertIx:e};for(h=c;h<this._fileData.length&&!(n=this._fileData[h].offset,p=n+this._fileData[h].data.length,a>=n-1&&(b=h),a<=p+1);h++);-1===b&&(b=c);return{startIx:c,endIx:b}}},{key:"hasDataRange",value:function(d,a){for(var c=0;c<this._fileData.length;c++){var b=this._fileData[c];if(a<b.offset)break;
if(d>=b.offset&&a<b.offset+b.data.length)return!0}return!1}},{key:"getByteAt",value:function(d){for(var a,c=0;c<this._fileData.length;c++){var b=this._fileData[c].offset,e=b+this._fileData[c].data.length-1;if(d>=b&&d<=e){a=this._fileData[c];break}}if(a)return a.data[d-a.offset];throw Error("Offset "+d+" hasn't been loaded yet.");}}]);return g}();m.exports=f},{}],6:[function(f,m,l){function k(a,c){if("function"!==typeof c&&null!==c)throw new TypeError("Super expression must either be null or a function, not "+
typeof c);a.prototype=Object.create(c&&c.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});c&&(Object.setPrototypeOf?Object.setPrototypeOf(a,c):a.__proto__=c)}var g=function(){function a(a,b){for(var e=0;e<b.length;e++){var h=b[e];h.enumerable=h.enumerable||!1;h.configurable=!0;"value"in h&&(h.writable=!0);Object.defineProperty(a,h.key,h)}}return function(c,b,e){b&&a(c.prototype,b);e&&a(c,e);return c}}();l=f("./MediaTagReader");f("./MediaFileReader");f=function(a){function c(){if(!(this instanceof
c))throw new TypeError("Cannot call a class as a function");var b=Object.getPrototypeOf(c).apply(this,arguments);if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!==typeof b&&"function"!==typeof b?this:b}k(c,a);g(c,[{key:"_loadData",value:function(b,a){var c=b.getSize();b.loadRange([c-128,c-1],a)}},{key:"_parseData",value:function(b,a){var c=b.getSize()-128,n=b.getStringWithCharsetAt(c+3,30).toString(),p=b.getStringWithCharsetAt(c+33,
30).toString(),t=b.getStringWithCharsetAt(c+63,30).toString(),g=b.getStringWithCharsetAt(c+93,4).toString(),u=b.getByteAt(c+97+28),f=b.getByteAt(c+97+29);if(0==u&&0!=f)var u="1.1",w=b.getStringWithCharsetAt(c+97,28).toString();else u="1.0",w=b.getStringWithCharsetAt(c+97,30).toString(),f=0;c=b.getByteAt(c+97+30);n={type:"ID3",version:u,tags:{title:n,artist:p,album:t,year:g,comment:w,genre:255>c?d[c]:""}};f&&(n.tags.track=f);return n}}],[{key:"getTagIdentifierByteRange",value:function(){return{offset:-128,
length:128}}},{key:"canReadTagFormat",value:function(b){return"TAG"===String.fromCharCode.apply(String,b.slice(0,3))}}]);return c}(l);var d="Blues;Classic Rock;Country;Dance;Disco;Funk;Grunge;Hip-Hop;Jazz;Metal;New Age;Oldies;Other;Pop;R&B;Rap;Reggae;Rock;Techno;Industrial;Alternative;Ska;Death Metal;Pranks;Soundtrack;Euro-Techno;Ambient;Trip-Hop;Vocal;Jazz+Funk;Fusion;Trance;Classical;Instrumental;Acid;House;Game;Sound Clip;Gospel;Noise;AlternRock;Bass;Soul;Punk;Space;Meditative;Instrumental Pop;Instrumental Rock;Ethnic;Gothic;Darkwave;Techno-Industrial;Electronic;Pop-Folk;Eurodance;Dream;Southern Rock;Comedy;Cult;Gangsta;Top 40;Christian Rap;Pop/Funk;Jungle;Native American;Cabaret;New Wave;Psychadelic;Rave;Showtunes;Trailer;Lo-Fi;Tribal;Acid Punk;Acid Jazz;Polka;Retro;Musical;Rock & Roll;Hard Rock;Folk;Folk-Rock;National Folk;Swing;Fast Fusion;Bebob;Latin;Revival;Celtic;Bluegrass;Avantgarde;Gothic Rock;Progressive Rock;Psychedelic Rock;Symphonic Rock;Slow Rock;Big Band;Chorus;Easy Listening;Acoustic;Humour;Speech;Chanson;Opera;Chamber Music;Sonata;Symphony;Booty Bass;Primus;Porn Groove;Satire;Slow Jam;Club;Tango;Samba;Folklore;Ballad;Power Ballad;Rhythmic Soul;Freestyle;Duet;Punk Rock;Drum Solo;Acapella;Euro-House;Dance Hall".split(";");
m.exports=f},{"./MediaFileReader":10,"./MediaTagReader":11}],7:[function(f,m,l){function k(a){var c;switch(a){case 0:c="iso-8859-1";break;case 1:c="utf-16";break;case 2:c="utf-16be";break;case 3:c="utf-8"}return c}f("./MediaFileReader");var g={APIC:function(a,c,b,e,h){h=h||"3";e=a;var n=k(b.getByteAt(a));switch(h){case "2":h=b.getStringAt(a+1,3);a+=4;break;case "3":case "4":h=b.getStringWithCharsetAt(a+1,c-1);a+=1+h.bytesReadCount;break;default:throw Error("Couldn't read ID3v2 major version.");}var p=
b.getByteAt(a,1),p=d[p],n=b.getStringWithCharsetAt(a+1,c-(a-e)-1,n);a+=1+n.bytesReadCount;return{format:h.toString(),type:p,description:n.toString(),data:b.getBytesAt(a,e+c-a)}},COMM:function(a,c,b,e,h){var n=a,d=k(b.getByteAt(a));e=b.getStringAt(a+1,3);h=b.getStringWithCharsetAt(a+4,c-4,d);a+=4+h.bytesReadCount;a=b.getStringWithCharsetAt(a,n+c-a,d);return{language:e,short_description:h.toString(),text:a.toString()}}};g.COM=g.COMM;g.PIC=function(a,c,b,e,h){return g.APIC(a,c,b,e,"2")};g.PCNT=function(a,
c,b,e,h){return b.getLongAt(a,!1)};g.CNT=g.PCNT;g["T*"]=function(a,c,b,e,h){e=k(b.getByteAt(a));return b.getStringWithCharsetAt(a+1,c-1,e).toString()};g["W*"]=function(a,c,b,e,h){e=k(b.getByteAt(a));return void 0!==e?b.getStringWithCharsetAt(a+1,c-1,e).toString():b.getStringWithCharsetAt(a,c,e).toString()};g.TCON=function(a,c,b,e){return g["T*"].apply(this,arguments).replace(/^\(\d+\)/,"")};g.TCO=g.TCON;g.USLT=function(a,c,b,e,h){var n=a,d=k(b.getByteAt(a));e=b.getStringAt(a+1,3);h=b.getStringWithCharsetAt(a+
4,c-4,d);a+=4+h.bytesReadCount;a=b.getStringWithCharsetAt(a,n+c-a,d);return{language:e,descriptor:h.toString(),lyrics:a.toString()}};g.ULT=g.USLT;var d="Other;32x32 pixels 'file icon' (PNG only);Other file icon;Cover (front);Cover (back);Leaflet page;Media (e.g. label side of CD);Lead artist/lead performer/soloist;Artist/performer;Conductor;Band/Orchestra;Composer;Lyricist/text writer;Recording Location;During recording;During performance;Movie/video screen capture;A bright coloured fish;Illustration;Band/artist logotype;Publisher/Studio logotype".split(";");
m.exports={getFrameReaderFunction:function(a){return a in g?g[a]:"T"===a[0]?g["T*"]:"W"===a[0]?g["W*"]:null}}},{"./MediaFileReader":10}],8:[function(f,m,l){function k(b,a){if("function"!==typeof a&&null!==a)throw new TypeError("Super expression must either be null or a function, not "+typeof a);b.prototype=Object.create(a&&a.prototype,{constructor:{value:b,enumerable:!1,writable:!0,configurable:!0}});a&&(Object.setPrototypeOf?Object.setPrototypeOf(b,a):b.__proto__=a)}var g=function(){function b(a,
c){for(var e=0;e<c.length;e++){var d=c[e];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(a,d.key,d)}}return function(a,c,d){c&&b(a.prototype,c);d&&b(a,d);return a}}();l=f("./MediaTagReader");f("./MediaFileReader");var d=f("./ArrayFileReader"),a=f("./ID3v2FrameReader");f=function(e){function h(){if(!(this instanceof h))throw new TypeError("Cannot call a class as a function");var b=Object.getPrototypeOf(h).apply(this,arguments);if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
return!b||"object"!==typeof b&&"function"!==typeof b?this:b}k(h,e);g(h,[{key:"_loadData",value:function(b,a){b.loadRange([6,9],{onSuccess:function(){b.loadRange([0,10+b.getSynchsafeInteger32At(6)-1],a)},onError:a.onError})}},{key:"_parseData",value:function(a,c){var e=0,h=a.getByteAt(e+3);if(4<h)return{type:"ID3",version:">2.4",tags:{}};var d=a.getByteAt(e+4),f=a.isBitSetAt(e+5,7),g=a.isBitSetAt(e+5,6),x=a.isBitSetAt(e+5,5),k=a.getSynchsafeInteger32At(e+6),e=e+10;if(g)var m=a.getLongAt(e,!0),e=e+
(m+4);var h={type:"ID3",version:"2."+h+"."+d,major:h,revision:d,flags:{unsynchronisation:f,extended_header:g,experimental_indicator:x,footer_present:!1},size:k,tags:{}},e=this._readFrames(e,k-10,a,h,c),l;for(l in b)b.hasOwnProperty(l)&&(k=this._getFrameData(e,b[l]))&&(h.tags[l]=k);for(var q in e)e.hasOwnProperty(q)&&(h.tags[q]=e[q]);return h}},{key:"_getUnsyncFileReader",value:function(b,a,c){b=b.getBytesAt(a,c);for(a=0;a<b.length-1;a++)255===b[a]&&0===b[a+1]&&b.splice(a+1,1);return new d(b)}},{key:"_readFrames",
value:function(b,c,e,h,d){var g={};for(d&&(d=this._expandShortcutTags(d));b<c;){var f=this._readFrameHeader(e,b,h),k=f.id;if(0===f.size)break;if(!k)break;var l=f.flags,m=f.size,r=b+f.headerSize,q=e;b+=f.headerSize+f.size;if(!d||-1!==d.indexOf(k)){if(h.flags.unsynchronisation||l&&l.format.unsynchronisation)q=this._getUnsyncFileReader(q,r,m),r=0,m=q.getSize();l&&l.format.data_length_indicator&&(r+=4,m-=4);l=(f=a.getFrameReaderFunction(k))?f(r,m,q,l):null;r=this._getFrameDescription(k);m={id:k,size:m,
description:r,data:l};k in g?(g[k].id&&(g[k]=[g[k]]),g[k].push(m)):g[k]=m}}return g}},{key:"_readFrameHeader",value:function(b,a,c){c=c.major;var e=null;switch(c){case 2:var h=b.getStringAt(a,3),d=b.getInteger24At(a+3,!0),f=6;break;case 3:h=b.getStringAt(a,4);d=b.getLongAt(a+4,!0);f=10;break;case 4:h=b.getStringAt(a,4),d=b.getSynchsafeInteger32At(a+4),f=10}h&&2<c&&(e=this._readFrameFlags(b,a+8));return{id:h||"",size:d||0,headerSize:f||0,flags:e}}},{key:"_readFrameFlags",value:function(b,a){return{message:{tag_alter_preservation:b.isBitSetAt(a,
6),file_alter_preservation:b.isBitSetAt(a,5),read_only:b.isBitSetAt(a,4)},format:{grouping_identity:b.isBitSetAt(a+1,7),compression:b.isBitSetAt(a+1,3),encryption:b.isBitSetAt(a+1,2),unsynchronisation:b.isBitSetAt(a+1,1),data_length_indicator:b.isBitSetAt(a+1,0)}}}},{key:"_getFrameData",value:function(b,a){for(var c=0,e;e=a[c];c++)if(e in b)return b[e].data}},{key:"_getFrameDescription",value:function(b){return b in c?c[b]:"Unknown"}},{key:"getShortcuts",value:function(){return b}}],[{key:"getTagIdentifierByteRange",
value:function(){return{offset:0,length:10}}},{key:"canReadTagFormat",value:function(b){return"ID3"===String.fromCharCode.apply(String,b.slice(0,3))}}]);return h}(l);var c={BUF:"Recommended buffer size",CNT:"Play counter",COM:"Comments",CRA:"Audio encryption",CRM:"Encrypted meta frame",ETC:"Event timing codes",EQU:"Equalization",GEO:"General encapsulated object",IPL:"Involved people list",LNK:"Linked information",MCI:"Music CD Identifier",MLL:"MPEG location lookup table",PIC:"Attached picture",POP:"Popularimeter",
REV:"Reverb",RVA:"Relative volume adjustment",SLT:"Synchronized lyric/text",STC:"Synced tempo codes",TAL:"Album/Movie/Show title",TBP:"BPM (Beats Per Minute)",TCM:"Composer",TCO:"Content type",TCR:"Copyright message",TDA:"Date",TDY:"Playlist delay",TEN:"Encoded by",TFT:"File type",TIM:"Time",TKE:"Initial key",TLA:"Language(s)",TLE:"Length",TMT:"Media type",TOA:"Original artist(s)/performer(s)",TOF:"Original filename",TOL:"Original Lyricist(s)/text writer(s)",TOR:"Original release year",TOT:"Original album/Movie/Show title",
TP1:"Lead artist(s)/Lead performer(s)/Soloist(s)/Performing group",TP2:"Band/Orchestra/Accompaniment",TP3:"Conductor/Performer refinement",TP4:"Interpreted, remixed, or otherwise modified by",TPA:"Part of a set",TPB:"Publisher",TRC:"ISRC (International Standard Recording Code)",TRD:"Recording dates",TRK:"Track number/Position in set",TSI:"Size",TSS:"Software/hardware and settings used for encoding",TT1:"Content group description",TT2:"Title/Songname/Content description",TT3:"Subtitle/Description refinement",
TXT:"Lyricist/text writer",TXX:"User defined text information frame",TYE:"Year",UFI:"Unique file identifier",ULT:"Unsychronized lyric/text transcription",WAF:"Official audio file webpage",WAR:"Official artist/performer webpage",WAS:"Official audio source webpage",WCM:"Commercial information",WCP:"Copyright/Legal information",WPB:"Publishers official webpage",WXX:"User defined URL link frame",AENC:"Audio encryption",APIC:"Attached picture",ASPI:"Audio seek point index",COMM:"Comments",COMR:"Commercial frame",
ENCR:"Encryption method registration",EQU2:"Equalisation (2)",EQUA:"Equalization",ETCO:"Event timing codes",GEOB:"General encapsulated object",GRID:"Group identification registration",IPLS:"Involved people list",LINK:"Linked information",MCDI:"Music CD identifier",MLLT:"MPEG location lookup table",OWNE:"Ownership frame",PRIV:"Private frame",PCNT:"Play counter",POPM:"Popularimeter",POSS:"Position synchronisation frame",RBUF:"Recommended buffer size",RVA2:"Relative volume adjustment (2)",RVAD:"Relative volume adjustment",
RVRB:"Reverb",SEEK:"Seek frame",SYLT:"Synchronized lyric/text",SYTC:"Synchronized tempo codes",TALB:"Album/Movie/Show title",TBPM:"BPM (beats per minute)",TCOM:"Composer",TCON:"Content type",TCOP:"Copyright message",TDAT:"Date",TDLY:"Playlist delay",TDRC:"Recording time",TDRL:"Release time",TDTG:"Tagging time",TENC:"Encoded by",TEXT:"Lyricist/Text writer",TFLT:"File type",TIME:"Time",TIPL:"Involved people list",TIT1:"Content group description",TIT2:"Title/songname/content description",TIT3:"Subtitle/Description refinement",
TKEY:"Initial key",TLAN:"Language(s)",TLEN:"Length",TMCL:"Musician credits list",TMED:"Media type",TMOO:"Mood",TOAL:"Original album/movie/show title",TOFN:"Original filename",TOLY:"Original lyricist(s)/text writer(s)",TOPE:"Original artist(s)/performer(s)",TORY:"Original release year",TOWN:"File owner/licensee",TPE1:"Lead performer(s)/Soloist(s)",TPE2:"Band/orchestra/accompaniment",TPE3:"Conductor/performer refinement",TPE4:"Interpreted, remixed, or otherwise modified by",TPOS:"Part of a set",TPRO:"Produced notice",
TPUB:"Publisher",TRCK:"Track number/Position in set",TRDA:"Recording dates",TRSN:"Internet radio station name",TRSO:"Internet radio station owner",TSOA:"Album sort order",TSOP:"Performer sort order",TSOT:"Title sort order",TSIZ:"Size",TSRC:"ISRC (international standard recording code)",TSSE:"Software/Hardware and settings used for encoding",TSST:"Set subtitle",TYER:"Year",TXXX:"User defined text information frame",UFID:"Unique file identifier",USER:"Terms of use",USLT:"Unsychronized lyric/text transcription",
WCOM:"Commercial information",WCOP:"Copyright/Legal information",WOAF:"Official audio file webpage",WOAR:"Official artist/performer webpage",WOAS:"Official audio source webpage",WORS:"Official internet radio station homepage",WPAY:"Payment",WPUB:"Publishers official webpage",WXXX:"User defined URL link frame"},b={title:["TIT2","TT2"],artist:["TPE1","TP1"],album:["TALB","TAL"],year:["TYER","TYE"],comment:["COMM","COM"],track:["TRCK","TRK"],genre:["TCON","TCO"],picture:["APIC","PIC"],lyrics:["USLT",
"ULT"]};m.exports=f},{"./ArrayFileReader":3,"./ID3v2FrameReader":7,"./MediaFileReader":10,"./MediaTagReader":11}],9:[function(f,m,l){function k(b,a){if("function"!==typeof a&&null!==a)throw new TypeError("Super expression must either be null or a function, not "+typeof a);b.prototype=Object.create(a&&a.prototype,{constructor:{value:b,enumerable:!1,writable:!0,configurable:!0}});a&&(Object.setPrototypeOf?Object.setPrototypeOf(b,a):b.__proto__=a)}var g=function(){function b(b,a){for(var c=0;c<a.length;c++){var d=
a[c];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(b,d.key,d)}}return function(a,c,d){c&&b(a.prototype,c);d&&b(a,d);return a}}();l=f("./MediaTagReader");f("./MediaFileReader");f=function(b){function e(){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");var b=Object.getPrototypeOf(e).apply(this,arguments);if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!==
typeof b&&"function"!==typeof b?this:b}k(e,b);g(e,[{key:"_loadData",value:function(b,a){var c=this;b.loadRange([0,16],{onSuccess:function(){c._loadAtom(b,0,"",a)},onError:a.onError})}},{key:"_loadAtom",value:function(b,a,c,e){if(a>=b.getSize())e.onSuccess();else{var d=this,f=b.getLongAt(a,!0);if(0==f||isNaN(f))e.onSuccess();else{var g=b.getStringAt(a+4,4);if(this._isContainerAtom(g)){"meta"==g&&(a+=4);var k=(c?c+".":"")+g;"moov.udta.meta.ilst"===k?b.loadRange([a,a+f],e):b.loadRange([a+8,a+8+8],{onSuccess:function(){d._loadAtom(b,
a+8,k,e)},onError:e.onError})}else b.loadRange([a+f,a+f+8],{onSuccess:function(){d._loadAtom(b,a+f,c,e)},onError:e.onError})}}}},{key:"_isContainerAtom",value:function(b){return 0<=["moov","udta","meta","ilst"].indexOf(b)}},{key:"_canReadAtom",value:function(b){return"----"!==b}},{key:"_parseData",value:function(b,a){var e={};a=this._expandShortcutTags(a);this._readAtom(e,b,0,b.getSize(),a);for(var d in c)if(c.hasOwnProperty(d)){var f=e[c[d]];f&&(e[d]="track"===d?f.data.track:f.data)}return{type:"MP4",
ftyp:b.getStringAt(8,4),version:b.getLongAt(12,!0),tags:e}}},{key:"_readAtom",value:function(b,a,c,e,d,f,g){g=void 0===g?"":g+"  ";for(var k=c;k<c+e;){var m=a.getLongAt(k,!0);if(0==m)break;var l=a.getStringAt(k+4,4);if(this._isContainerAtom(l)){"meta"==l&&(k+=4);this._readAtom(b,a,k+8,m-8,d,(f?f+".":"")+l,g);break}(!d||0<=d.indexOf(l))&&"moov.udta.meta.ilst"===f&&this._canReadAtom(l)&&(b[l]=this._readMetadataAtom(a,k));k+=m}}},{key:"_readMetadataAtom",value:function(b,c){var e=b.getLongAt(c,!0),f=
b.getStringAt(c+4,4),g=b.getInteger24At(c+16+1,!0),g=d[g],k;if("trkn"==f)k={track:b.getByteAt(c+16+11),total:b.getByteAt(c+16+13)};else{var l=c+24,m=e-24;switch(g){case "text":k=b.getStringWithCharsetAt(l,m,"utf-8").toString();break;case "uint8":k=b.getShortAt(l,!1);break;case "jpeg":case "png":k={format:"image/"+g,data:b.getBytesAt(l,m)}}}return{id:f,size:e,description:a[f]||"Unknown",data:k}}},{key:"getShortcuts",value:function(){return c}}],[{key:"getTagIdentifierByteRange",value:function(){return{offset:0,
length:16}}},{key:"canReadTagFormat",value:function(b){return"ftyp"===String.fromCharCode.apply(String,b.slice(4,8))}}]);return e}(l);var d={0:"uint8",1:"text",13:"jpeg",14:"png",21:"uint8"},a={"\u00a9alb":"Album","\u00a9ART":"Artist",aART:"Album Artist","\u00a9day":"Release Date","\u00a9nam":"Title","\u00a9gen":"Genre",gnre:"Genre",trkn:"Track Number","\u00a9wrt":"Composer","\u00a9too":"Encoding Tool","\u00a9enc":"Encoded By",cprt:"Copyright",covr:"Cover Art","\u00a9grp":"Grouping",keyw:"Keywords",
"\u00a9lyr":"Lyrics","\u00a9cmt":"Comment",tmpo:"Tempo",cpil:"Compilation",disk:"Disc Number",tvsh:"TV Show Name",tven:"TV Episode ID",tvsn:"TV Season",tves:"TV Episode",tvnn:"TV Network",desc:"Description",ldes:"Long Description",sonm:"Sort Name",soar:"Sort Artist",soaa:"Sort Album",soco:"Sort Composer",sosn:"Sort Show",purd:"Purchase Date",pcst:"Podcast",purl:"Podcast URL",catg:"Category",hdvd:"HD Video",stik:"Media Type",rtng:"Content Rating",pgap:"Gapless Playback",apID:"Purchase Account",sfID:"Country Code"},
c={title:"\u00a9nam",artist:"\u00a9ART",album:"\u00a9alb",year:"\u00a9day",comment:"\u00a9cmt",track:"trkn",genre:"\u00a9gen",picture:"covr",lyrics:"\u00a9lyr"};m.exports=f},{"./MediaFileReader":10,"./MediaTagReader":11}],10:[function(f,m,l){var k=function(){function d(a,c){for(var b=0;b<c.length;b++){var e=c[b];e.enumerable=e.enumerable||!1;e.configurable=!0;"value"in e&&(e.writable=!0);Object.defineProperty(a,e.key,e)}}return function(a,c,b){c&&d(a.prototype,c);b&&d(a,b);return a}}(),g=f("./StringUtils");
f=function(){function d(){if(!(this instanceof d))throw new TypeError("Cannot call a class as a function");this._isInitialized=!1;this._size=0}k(d,[{key:"init",value:function(a){var c=this;if(this._isInitialized)setTimeout(a.onSuccess,1);else return this._init({onSuccess:function(){c._isInitialized=!0;a.onSuccess()},onError:a.onError})}},{key:"_init",value:function(a){throw Error("Must implement init function");}},{key:"loadRange",value:function(a,c){throw Error("Must implement loadRange function");
}},{key:"getSize",value:function(){if(!this._isInitialized)throw Error("init() must be called first.");return this._size}},{key:"getByteAt",value:function(a){throw Error("Must implement getByteAt function");}},{key:"getBytesAt",value:function(a,c){for(var b=Array(c),e=0;e<c;e++)b[e]=this.getByteAt(a+e);return b}},{key:"isBitSetAt",value:function(a,c){return 0!=(this.getByteAt(a)&1<<c)}},{key:"getSByteAt",value:function(a){a=this.getByteAt(a);return 127<a?a-256:a}},{key:"getShortAt",value:function(a,
c){var b=c?(this.getByteAt(a)<<8)+this.getByteAt(a+1):(this.getByteAt(a+1)<<8)+this.getByteAt(a);0>b&&(b+=65536);return b}},{key:"getSShortAt",value:function(a,c){var b=this.getShortAt(a,c);return 32767<b?b-65536:b}},{key:"getLongAt",value:function(a,c){var b=this.getByteAt(a),e=this.getByteAt(a+1),d=this.getByteAt(a+2),f=this.getByteAt(a+3),b=c?(((b<<8)+e<<8)+d<<8)+f:(((f<<8)+d<<8)+e<<8)+b;0>b&&(b+=4294967296);return b}},{key:"getSLongAt",value:function(a,c){var b=this.getLongAt(a,c);return 2147483647<
b?b-4294967296:b}},{key:"getInteger24At",value:function(a,c){var b=this.getByteAt(a),e=this.getByteAt(a+1),d=this.getByteAt(a+2),b=c?((b<<8)+e<<8)+d:((d<<8)+e<<8)+b;0>b&&(b+=16777216);return b}},{key:"getStringAt",value:function(a,c){for(var b=[],e=a,d=0;e<a+c;e++,d++)b[d]=String.fromCharCode(this.getByteAt(e));return b.join("")}},{key:"getStringWithCharsetAt",value:function(a,c,b){a=this.getBytesAt(a,c);switch((b||"").toLowerCase()){case "utf-16":case "utf-16le":case "utf-16be":b=g.readUTF16String(a,
"utf-16be"===b);break;case "utf-8":b=g.readUTF8String(a);break;default:b=g.readNullTerminatedString(a)}return b}},{key:"getCharAt",value:function(a){return String.fromCharCode(this.getByteAt(a))}},{key:"getSynchsafeInteger32At",value:function(a){var c=this.getByteAt(a),b=this.getByteAt(a+1),e=this.getByteAt(a+2);return this.getByteAt(a+3)&127|(e&127)<<7|(b&127)<<14|(c&127)<<21}}],[{key:"canReadFile",value:function(a){throw Error("Must implement canReadFile function");}}]);return d}();m.exports=f},
{"./StringUtils":12}],11:[function(f,m,l){var k=function(){function f(d,a){for(var c=0;c<a.length;c++){var b=a[c];b.enumerable=b.enumerable||!1;b.configurable=!0;"value"in b&&(b.writable=!0);Object.defineProperty(d,b.key,b)}}return function(d,a,c){a&&f(d.prototype,a);c&&f(d,c);return d}}();f("./MediaFileReader");f=function(){function f(d){if(!(this instanceof f))throw new TypeError("Cannot call a class as a function");this._mediaFileReader=d;this._tags=null}k(f,[{key:"setTagsToRead",value:function(d){this._tags=
d;return this}},{key:"read",value:function(d){var a=this;this._mediaFileReader.init({onSuccess:function(){a._loadData(a._mediaFileReader,{onSuccess:function(){var c=a._parseData(a._mediaFileReader,a._tags);d.onSuccess(c)},onError:d.onError})},onError:d.onError})}},{key:"getShortcuts",value:function(){return{}}},{key:"_loadData",value:function(d,a){throw Error("Must implement _loadData function");}},{key:"_parseData",value:function(d,a){throw Error("Must implement _parseData function");}},{key:"_expandShortcutTags",
value:function(d){if(!d)return null;for(var a=[],c=this.getShortcuts(),b=0,e;e=d[b];b++)a=a.concat(c[e]||[e]);return a}}],[{key:"getTagIdentifierByteRange",value:function(){throw Error("Must implement");}},{key:"canReadTagFormat",value:function(d){throw Error("Must implement");}}]);return f}();m.exports=f},{"./MediaFileReader":10}],12:[function(f,m,l){var k=function(){function d(a,c){for(var b=0;b<c.length;b++){var e=c[b];e.enumerable=e.enumerable||!1;e.configurable=!0;"value"in e&&(e.writable=!0);
Object.defineProperty(a,e.key,e)}}return function(a,c,b){c&&d(a.prototype,c);b&&d(a,b);return a}}(),g=function(){function d(a,c){if(!(this instanceof d))throw new TypeError("Cannot call a class as a function");this._value=a;this.bytesReadCount=c;this.length=a.length}k(d,[{key:"toString",value:function(){return this._value}}]);return d}();m.exports={readUTF16String:function(d,a,c){var b=0,e=1,h=0;c=Math.min(c||d.length,d.length);254==d[0]&&255==d[1]?(a=!0,b=2):255==d[0]&&254==d[1]&&(a=!1,b=2);a&&(e=
0,h=1);a=[];for(var f=0;b<c;f++){var k=d[b+e],l=(k<<8)+d[b+h],b=b+2;if(0==l)break;else 216>k||224<=k?a[f]=String.fromCharCode(l):(k=(d[b+e]<<8)+d[b+h],b+=2,a[f]=String.fromCharCode(l,k))}return new g(a.join(""),b)},readUTF8String:function(d,a){var c=0;a=Math.min(a||d.length,d.length);239==d[0]&&187==d[1]&&191==d[2]&&(c=3);for(var b=[],e=0;c<a;e++){var h=d[c++];if(0==h)break;else if(128>h)b[e]=String.fromCharCode(h);else if(194<=h&&224>h){var f=d[c++];b[e]=String.fromCharCode(((h&31)<<6)+(f&63))}else if(224<=
h&&240>h){var f=d[c++],k=d[c++];b[e]=String.fromCharCode(((h&255)<<12)+((f&63)<<6)+(k&63))}else if(240<=h&&245>h){var f=d[c++],k=d[c++],l=d[c++],h=((h&7)<<18)+((f&63)<<12)+((k&63)<<6)+(l&63)-65536;b[e]=String.fromCharCode((h>>10)+55296,(h&1023)+56320)}}return new g(b.join(""),c)},readNullTerminatedString:function(d,a){var c=[];a=a||d.length;for(var b=0;b<a;){var e=d[b++];if(0==e)break;c[b-1]=String.fromCharCode(e)}return new g(c.join(""),b)}}},{}],13:[function(f,m,l){function k(a,c){if("function"!==
typeof c&&null!==c)throw new TypeError("Super expression must either be null or a function, not "+typeof c);a.prototype=Object.create(c&&c.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});c&&(Object.setPrototypeOf?Object.setPrototypeOf(a,c):a.__proto__=c)}var g=function(){function a(a,b){for(var e=0;e<b.length;e++){var d=b[e];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(a,d.key,d)}}return function(c,b,e){b&&a(c.prototype,
b);e&&a(c,e);return c}}(),d=f("./ChunkedFileData");l=function(a){function c(b){if(!(this instanceof c))throw new TypeError("Cannot call a class as a function");var a;a=Object.getPrototypeOf(c).call(this);if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");a=!a||"object"!==typeof a&&"function"!==typeof a?this:a;a._url=b;a._fileData=new d;return a}k(c,a);g(c,[{key:"_init",value:function(b){c._config.avoidHeadRequests?this._fetchSizeWithGetRequest(b):this._fetchSizeWithHeadRequest(b)}},
{key:"_fetchSizeWithHeadRequest",value:function(b){var a=this;this._makeXHRRequest("HEAD",null,{onSuccess:function(c){(c=a._parseContentLength(c))?(a._size=c,b.onSuccess()):a._fetchSizeWithGetRequest(b)},onError:b.onError})}},{key:"_fetchSizeWithGetRequest",value:function(b){var a=this,c=this._roundRangeToChunkMultiple([0,0]);this._makeXHRRequest("GET",c,{onSuccess:function(c){var d=a._parseContentRange(c);c=a._getXhrResponseContent(c);if(d){if(null==d.instanceLength){a._fetchEntireFile(b);return}a._size=
d.instanceLength}else a._size=c.length;a._fileData.addData(0,c);b.onSuccess()},onError:b.onError})}},{key:"_fetchEntireFile",value:function(b){var a=this;this._makeXHRRequest("GET",null,{onSuccess:function(c){c=a._getXhrResponseContent(c);a._size=c.length;a._fileData.addData(0,c);b.onSuccess()},onError:b.onError})}},{key:"_getXhrResponseContent",value:function(a){return a.responseBody||a.responseText||""}},{key:"_parseContentLength",value:function(a){a=this._getResponseHeader(a,"Content-Length");
return null==a?a:parseInt(a,10)}},{key:"_parseContentRange",value:function(a){if(a=this._getResponseHeader(a,"Content-Range")){var c=a.match(/bytes (\d+)-(\d+)\/(?:(\d+)|\*)/i);if(!c)throw Error("FIXME: Unknown Content-Range syntax: ",a);return{firstBytePosition:parseInt(c[1],10),lastBytePosition:parseInt(c[2],10),instanceLength:c[3]?parseInt(c[3],10):null}}return null}},{key:"loadRange",value:function(a,c){var d=this;d._fileData.hasDataRange(a[0],Math.min(d._size,a[1]))?setTimeout(c.onSuccess,1):
(a=this._roundRangeToChunkMultiple(a),a[1]=Math.min(d._size,a[1]),this._makeXHRRequest("GET",a,{onSuccess:function(f){f=d._getXhrResponseContent(f);d._fileData.addData(a[0],f);c.onSuccess()},onError:c.onError}))}},{key:"_roundRangeToChunkMultiple",value:function(a){return[a[0],a[0]+1024*Math.ceil((a[1]-a[0]+1)/1024)-1]}},{key:"_makeXHRRequest",value:function(a,d,f){var g=this._createXHRObject(),k=function(){if(200===g.status||206===g.status)f.onSuccess(g);else if(f.onError)f.onError({type:"xhr",info:"Unexpected HTTP status "+
g.status+".",xhr:g});g=null};"undefined"!==typeof g.onload?(g.onload=k,g.onerror=function(){if(f.onError)f.onError({type:"xhr",info:"Generic XHR error, check xhr object.",xhr:g})}):g.onreadystatechange=function(){4===g.readyState&&k()};c._config.timeoutInSec&&(g.timeout=1E3*c._config.timeoutInSec,g.ontimeout=function(){if(f.onError)f.onError({type:"xhr",info:"Timeout after "+g.timeout/1E3+"s. Use jsmediatags.Config.setXhrTimeout to override.",xhr:g})});g.open(a,this._url);g.overrideMimeType("text/plain; charset=x-user-defined");
d&&this._setRequestHeader(g,"Range","bytes="+d[0]+"-"+d[1]);this._setRequestHeader(g,"If-Modified-Since","Sat, 01 Jan 1970 00:00:00 GMT");g.send(null)}},{key:"_setRequestHeader",value:function(a,d,f){0>c._config.disallowedXhrHeaders.indexOf(d.toLowerCase())&&a.setRequestHeader(d,f)}},{key:"_hasResponseHeader",value:function(a,c){var d=a.getAllResponseHeaders();if(!d)return!1;for(var d=d.split("\r\n"),f=[],g=0;g<d.length;g++)f[g]=d[g].split(":")[0].toLowerCase();return 0<=f.indexOf(c.toLowerCase())}},
{key:"_getResponseHeader",value:function(a,c){return this._hasResponseHeader(a,c)?a.getResponseHeader(c):null}},{key:"getByteAt",value:function(a){return this._fileData.getByteAt(a).charCodeAt(0)&255}},{key:"_createXHRObject",value:function(){if("undefined"===typeof window)return new (f("xhr2").XMLHttpRequest);if(window.XMLHttpRequest)return new window.XMLHttpRequest;throw Error("XMLHttpRequest is not supported");}}],[{key:"canReadFile",value:function(a){return"string"===typeof a&&/^[a-z]+:\/\//i.test(a)}},
{key:"setConfig",value:function(a){for(var c in a)a.hasOwnProperty(c)&&(this._config[c]=a[c]);a=this._config.disallowedXhrHeaders;for(c=0;c<a.length;c++)a[c]=a[c].toLowerCase()}}]);return c}(f("./MediaFileReader"));l._config={avoidHeadRequests:!1,disallowedXhrHeaders:[],timeoutInSec:30};m.exports=l},{"./ChunkedFileData":5,"./MediaFileReader":10,xhr2:2}],14:[function(f,m,l){function k(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function");}var g=function(){function a(b,
c){for(var d=0;d<c.length;d++){var e=c[d];e.enumerable=e.enumerable||!1;e.configurable=!0;"value"in e&&(e.writable=!0);Object.defineProperty(b,e.key,e)}}return function(b,c,d){c&&a(b.prototype,c);d&&a(b,d);return b}}();f("./MediaFileReader");l=f("./NodeFileReader");var d=f("./XhrFileReader"),a=f("./BlobFileReader"),c=f("./ArrayFileReader");f("./MediaTagReader");var b=f("./ID3v1TagReader"),e=f("./ID3v2TagReader");f=f("./MP4TagReader");var h=[],n=[],p=function(){function a(b){k(this,a);this._file=b}
g(a,[{key:"setTagsToRead",value:function(a){this._tagsToRead=a;return this}},{key:"setFileReader",value:function(a){this._fileReader=a;return this}},{key:"setTagReader",value:function(a){this._tagReader=a;return this}},{key:"read",value:function(a){var b=new (this._getFileReader())(this._file),c=this;b.init({onSuccess:function(){c._getTagReader(b,{onSuccess:function(d){(new d(b)).setTagsToRead(c._tagsToRead).read(a)},onError:a.onError})},onError:a.onError})}},{key:"_getFileReader",value:function(){return this._fileReader?
this._fileReader:this._findFileReader()}},{key:"_findFileReader",value:function(){for(var a=0;a<h.length;a++)if(h[a].canReadFile(this._file))return h[a];throw Error("No suitable file reader found for ",this._file);}},{key:"_getTagReader",value:function(a,b){if(this._tagReader){var c=this._tagReader;setTimeout(function(){b.onSuccess(c)},1)}else this._findTagReader(a,b)}},{key:"_findTagReader",value:function(a,b){for(var c=[],d=[],e=a.getSize(),f=0;f<n.length;f++){var g=n[f].getTagIdentifierByteRange();
0<=g.offset&&g.offset<e/2||0>g.offset&&g.offset<-e/2?c.push(n[f]):d.push(n[f])}var h=!1,f={onSuccess:function(){if(h){for(var c=0;c<n.length;c++){var d=n[c].getTagIdentifierByteRange(),d=a.getBytesAt(0<=d.offset?d.offset:d.offset+e,d.length);if(n[c].canReadTagFormat(d)){b.onSuccess(n[c]);return}}if(b.onError)b.onError({type:"tagFormat",info:"No suitable tag reader found"})}else h=!0},onError:b.onError};this._loadTagIdentifierRanges(a,c,f);this._loadTagIdentifierRanges(a,d,f)}},{key:"_loadTagIdentifierRanges",
value:function(a,b,c){if(0===b.length)setTimeout(c.onSuccess,1);else{for(var d=[Number.MAX_VALUE,0],e=a.getSize(),f=0;f<b.length;f++){var g=b[f].getTagIdentifierByteRange(),h=0<=g.offset?g.offset:g.offset+e,g=h+g.length-1;d[0]=Math.min(h,d[0]);d[1]=Math.max(g,d[1])}a.loadRange(d,c)}}}]);return a}(),t=function(){function a(){k(this,a)}g(a,null,[{key:"addFileReader",value:function(b){h.push(b);return a}},{key:"addTagReader",value:function(b){n.push(b);return a}},{key:"removeTagReader",value:function(b){b=
n.indexOf(b);0<=b&&n.splice(b,1);return a}},{key:"EXPERIMENTAL_avoidHeadRequests",value:function(){d.setConfig({avoidHeadRequests:!0})}},{key:"setDisallowedXhrHeaders",value:function(a){d.setConfig({disallowedXhrHeaders:a})}},{key:"setXhrTimeoutInSec",value:function(a){d.setConfig({timeoutInSec:a})}}]);return a}();t.addFileReader(d).addFileReader(a).addFileReader(c).addTagReader(e).addTagReader(b).addTagReader(f);"undefined"!==typeof process&&t.addFileReader(l);m.exports={read:function(a,b){(new p(a)).read(b)},
Reader:p,Config:t}},{"./ArrayFileReader":3,"./BlobFileReader":4,"./ID3v1TagReader":6,"./ID3v2TagReader":8,"./MP4TagReader":9,"./MediaFileReader":10,"./MediaTagReader":11,"./NodeFileReader":1,"./XhrFileReader":13}]},{},[14])(14)});

!function(jwplayer){var template=function(player,config,div){function freshLoad(a,b,c,d){var e=player.plugins.listy,f=e.state,g=e.refs,h=player.config||player.getConfig();f.pl={},f.pl.filtered=[],f.pl.removed=[],f.pl.original=a,createMasterFromOriginal(),g[player.id+"_listy_edit_name"]&&(g[player.id+"_listy_edit_name"].value=c),f.pl.current=buildListy(),config.tubey&&config.tubey.sort&&""!=config.tubey.sort&&"as-is"!=config.tubey.sort&&("shuffle"==config.tubey.sort?e.shufflePlaylist():e.sortPlaylist(config.tubey.sort)),config.features&&config.features.shuffle&&config.features.shuffle.onLoad&&config.features.shuffle.onLoad===!0&&e.shufflePlaylist(),drawListy(),f.load_type=b,f.autoplay=!d&&!(!h.autostart||h.autostart!==!0&&"true"!==h.autostart),firstLoad()}function hookListyParse(){var a=player.plugins.listy,b=document.getElementById(player.id+"_listy_parse");if(b){var c=b.contentDocument,d=c.getElementsByTagName("head")[0],e=document.createElement("script");e.src=a.urls.listy_parse_url+"?d="+top.document.location.host,d.appendChild(e)}}function deleteCurrentListy(a){var b=player.plugins.listy,c=b.state;b.refs;b.isLoggedIn()?c.listy_parse.deleteListy(null,function(b){loadListy(null,[null,a?a:null])}):alert("You need to be logged into Listy before saving the current playlist")}function updateMyListys(){var a=player.plugins.listy,b=a.state,c=a.refs,d=document.getElementById(player.id+"_listy_save_row_load");b.listy_parse.getMyListys(function(a){if(c[player.id+"_listy_edit_load"]){for(var e=c[player.id+"_listy_edit_load"].options.length;e>=0;e--)c[player.id+"_listy_edit_load"].remove(e);var f=0;for(var g in a){var h=document.createElement("option");h.value=g,h.innerHTML=""==a[g]?"- no name -":a[g],b.pl.id==g&&h.setAttribute("selected","selected"),c[player.id+"_listy_edit_load"].appendChild(h),f++}f>0?removeClass(d,"listy-hidden"):addClass(d,"listy-hidden")}})}function configureSkins(){var a=player.plugins.listy,b=a.state,c=getSkinURL();getSkin(c,config.target),config.list.skin&&""!=config.list.skin&&(c=config.list.skin.indexOf(".xml")>-1?config.list.skin:"6"==b.jwp.major?jwplayer.utils.repo()+"skins/"+config.list.skin+".xml":"http://p.jwpcdn.com/6/12/skins/"+("seven"==config.list.skin?"six":config.list.skin)+".xml"),config.list.target&&getSkin(c,config.list.target)}function prefetchStart(a,b,c,d){window.listyCache[d]="Loading..."}function prefetchProgress(a,b,c,d,e){window.listyCache[d]=e+"%"}function prefetchComplete(a,b,c,d,e){top.console&&console.info("Listy // Prefetching complete ~ "+d+" ~ "+e)}function prefetchError(a,b,c,d,e){top.console&&console.info("Listy // Error prefetching video ~ "+d)}function prefetchFile(a,b,c,d,e,f,g){var h=player.plugins.listy,i=new XMLHttpRequest;if(i){try{prefetch_url=b,"http"==b.substring(0,4)&&(prefetch_url=h.urls.listy_prefetch_url,prefetch_url+="?t="+c,prefetch_url+="&d="+top.document.location.host,prefetch_url+="&f="+encodeURIComponent(b)),i.open("GET",prefetch_url,!0),i.responseType="blob",i.addEventListener("load",function(){var c=player.plugins.listy;c.state;if(200===i.status){var e=window.URL||window.webkitURL;if(e&&e.createObjectURL)if("text/plain"==i.response.type)window.listyCache[b]="Error when prefetching",updatePrefetchQueue(a),g&&g(player,c,a,b,"An error occured when prefetching");else{var h=i.response,j=e.createObjectURL(h);window.listyCache[b]=j,window.listyBlob[b]={},window.listyBlob[b].blob=h,window.listyBlob[b].url=j,updatePrefetchQueue(a),f&&f(player,c,a,b,j),jsmediatags&&setTimeout(function(){jsmediatags.read(h,{onSuccess:function(a){window.listyBlob[b].mediatags=a},onError:function(a){window.listyBlob[b].mediatags=a}})},100)}else window.listyCache[b]="Prefetch unsupported",updatePrefetchQueue(a),g&&g(player,c,a,b,"Prefetch unsupported in this browser")}else window.listyCache[b]=i.status,updatePrefetchQueue(a),g&&g(player,c,a,b,i.status)},!1)}catch(c){window.listyCache[b]=c,updatePrefetchQueue(a),g&&g(player,h,a,b,c)}i.addEventListener("loadstart",function(c){prefetchStart(player,h,a,b),d&&d(player,h,a,b)});var j=0;i.addEventListener("progress",function(c){if(c.lengthComputable){var d=Math.round(c.loaded/c.total*100);d!=j&&(j=d,prefetchProgress(player,h,a,b,d),e&&e(player,h,a,b,d))}}),i.send()}}function createMasterFromOriginal(){var a=player.plugins.listy,b=a.state;b.pl.master={};for(var c=0,d=b.pl.original.length;c<d;c++){var e="id_"+buildKey(c);b.pl.original[c].mediaid?e=b.pl.original[c].mediaid:b.pl.original[c].mediaid=e,e.indexOf("/playlists/")>-1&&(e=e.substring(e.lastIndexOf("/")+1),b.pl.original[c].mediaid=e),addToMaster(e,b.pl.original[c])}b.pl.media_id_count=c}function addToMaster(a,b){var c=player.plugins.listy,d=c.state;window.listyCache||(window.listyCache={}),window.listyBlob||(window.listyBlob={}),window.listyCache.assets||(window.listyCache.assets={}),window.listyCache.queues||(window.listyCache.queues={}),window.listyCache.requests||(window.listyCache.requests={}),d.pl.master[a]=b;var e=jwplayer.utils.isIE(8)||jwplayer.utils.isIE(9);if(isEnabled(config.prefetch)&&!jwplayer.utils.isMobile()&&!jwplayer.utils.isSafari()&&!e){var f=config.prefetch.begin,g=config.prefetch.progress,h=config.prefetch.complete,i=config.prefetch.error;prefetch(b,f,g,h,i)}}function getFileAndType(a){var b={};if(b.file=a.file,b.type=a.type,b.default=-1,a.sources){b.file=a.sources[0].file,b.type=a.sources[0].type,b.default=0;for(var c=0,d=a.sources.length;c<d;c++)a.sources[c].default&&(a.sources[c].default!==!0&&"true"!==a.sources[c].default||(b.file=a.sources[c].file,b.type=a.sources[c].type,b.default=c))}else a.download_url&&(b.file=a.download_url);return b}function prefetch(a,b,c,d,e){var f=getFileAndType(a);if(0==f.file.indexOf("/")||0==f.file.indexOf("http")){var g=!(!config.prefetch.xdomain_support||config.prefetch.xdomain_support!==!0);if(("mp4"==f.type||"mp3"==f.type)&&(!checkXDomain(f.file)||checkXDomain(f.file)&&g)){var h=b,i=c,j=d||prefetchComplete,k=e||prefetchError;if(!window.listyCache[f.file]){window.listyCache[f.file]="prefetch";var l=a.mediaid,m=f.file;m.indexOf("http")>-1?(m=m.substring(m.indexOf("://")+3),m=m.substring(0,m.indexOf("/"))):m="/","mp3"!=f.type||checkXDomain(f.file)||ID3.loadTags(f.file,function(){var a=player.plugins.listy,b=a.state;b.pl.master[l].id3_meta=ID3.getAllTags(f.file)},{tags:["title","artist","album","picture"]}),a.prefetch_domain=m;var n={};n.a=m,n.b=a,n.c=f.file,n.d=f.type,n.e=h,n.f=i,n.g=j,n.h=k,window.listyCache.queues[m]||(window.listyCache.queues[m]=0),window.listyCache.requests[l]=n}}}}function updatePrefetchQueue(a){var b=a.prefetch_domain,c=a.mediaid;window.listyCache.requests[c]&&(window.listyCache.requests[c]=null),window.listyCache.queues[b]--,checkPrefetchQueue()}function checkPrefetchQueue(){for(var a=player.plugins.listy,b=a.state,c=b.pl&&b.pl.current?b.pl.current:[],d=config.prefetch&&config.prefetch.async_requests?parseInt(config.prefetch.async_requests,10):3,e=config.prefetch&&config.prefetch.look_ahead?a.getPlaylistIndex()+parseInt(config.prefetch.look_ahead,10):c.length,f=0,g=e;f<g;f++){var h=c[f],i=window.listyCache.requests[h]?window.listyCache.requests[h]:null;if(i&&!i.prefetch_process){var j=i.a;window.listyCache.queues[j]<d&&(i.prefetch_process=!0,window.listyCache.queues[j]++,prefetchFile(i.b,i.c,i.d,i.e,i.f,i.g,i.h))}}}function buildListy(){var a=[];for(var b in player.plugins.listy.state.pl.master)a.push(b);return a}function drawPlaceholders(){var a=player.plugins.listy,b=a.state,c=a.refs,d=document.getElementById(config.target);if(!d){d=document.createElement("div"),d.setAttribute("id",config.target);var e=player.container||player.getContainer(),f=e.parentNode;("flash"==b.jwp.mode||"flash_video"==b.jwp.mode||b.jwp.mode.indexOf("flash")>-1)&&(e=f,f=e.parentNode),f.insertBefore(d,e.nextSibling)}if(config.list.target&&config.list.target!=config.target){var g=document.getElementById(config.list.target);g||(g=document.createElement("div"),g.setAttribute("id",config.list.target))}var h=uiTabBar()+uiListOptions()+uiAddItem()+uiAddYT()+uiAddSC()+uiUserOptions();d&&(d.innerHTML=h),config.users&&config.users.management&&(isEnabled(config.users)&&isEnabled(config.users.management)&&(c.sign_in=document.getElementById(player.id+"_listy_login"),c.sign_out=document.getElementById(player.id+"_listy_logout"),bind("click",c.sign_in,userNew,!1),bind("keyup",c.sign_in,checkForEnter,["userNew",!1]),bind("click",c.sign_out,userLogOut,[]),bind("keyup",c.sign_out,checkForEnter,["userLogOut",[]])),isEnabled(config.users)&&setTimeout(function(){hookListyParse()},500));for(var i=document.querySelectorAll("#"+config.target+" .listy-button"),j=0,k=i.length;j<k;j++){var l=i[j].getAttribute("id");c[l]=i[j]}for(var i=document.querySelectorAll("#"+config.target+" .listy-tab"),j=0,k=i.length;j<k;j++){var m=i[j].getAttribute("data-panel-id");bind("click",i[j],toggleTabs,[i[j],m]),bind("keyup",i[j],checkForEnter,["toggleTabs",[i[j],m]]),c[m]=i[j]}for(var i=document.querySelectorAll("#"+config.target+" .listy-panel-area"),j=0,k=i.length;j<k;j++){var m=i[j].getAttribute("id");c[m]=i[j]}for(var i=document.querySelectorAll("#"+config.target+" input[type=text],#"+config.target+" input[type=password],#"+config.target+" input[type=hidden],#"+config.target+" input[type=checkbox],#"+config.target+" input[type=radio],#"+config.target+" select,#"+config.target+" textarea"),j=0,k=i.length;j<k;j++){var n=i[j].getAttribute("id");c[n]=i[j]}for(var i=document.querySelectorAll("#"+config.target+" .listy-search-button"),j=0,k=i.length;j<k;j++){var o=i[j].getAttribute("data-field-id");bind("click",i[j],clearSearchField,o),bind("keyup",i[j],checkForEnter,["clearSearchField",o]),c[o+"_button"]=i[j]}bind("click",c[player.id+"_listy_pl_shuffle"],a.listyUI_shufflePlaylist),bind("keyup",c[player.id+"_listy_pl_shuffle"],checkForEnter,["listyUI_shufflePlaylist"]),bind("click",c[player.id+"_listy_pl_edit"],a.listyUI_editPlaylist),bind("keyup",c[player.id+"_listy_pl_edit"],checkForEnter,["listyUI_editPlaylist"]),bind("click",c[player.id+"_listy_pl_export"],a.listyUI_exportPlaylist),bind("keyup",c[player.id+"_listy_pl_export"],checkForEnter,["listyUI_exportPlaylist"]),bind("click",c[player.id+"_listy_add_custom"],toggleAddTabs,[player.id+"_listy_add_custom",player.id+"_listy_add_form"]),bind("keyup",c[player.id+"_listy_add_custom"],checkForEnter,["toggleAddTabs",[player.id+"_listy_add_custom",player.id+"_listy_add_form"]]),bind("click",c[player.id+"_listy_add_removed"],toggleAddTabs,[player.id+"_listy_add_removed",player.id+"_listy_add_list"]),bind("keyup",c[player.id+"_listy_add_removed"],checkForEnter,["toggleAddTabs",[player.id+"_listy_add_removed",player.id+"_listy_add_list"]]),bind("click",c[player.id+"_listy_add_panel"],updateAddOptions),bind("keyup",c[player.id+"_listy_add_panel"],checkForEnter,["updateAddOptions"]),bind("click",c[player.id+"_listy_add_preview"],previewCustomItem),bind("keyup",c[player.id+"_listy_add_preview"],checkForEnter,["previewCustomItem"]),bind("click",c[player.id+"_listy_add_next"],add,["custom","next"]),bind("keyup",c[player.id+"_listy_add_next"],checkForEnter,["add",["custom","next"]]),bind("click",c[player.id+"_listy_add_last"],add,["custom","last"]),bind("keyup",c[player.id+"_listy_add_last"],checkForEnter,["add",["custom","last"]]);var p=config.features.add&&config.features.add.options?config.features.add.options:{},q=p.form?p.form:{},r=q.buttons?q.buttons:{};for(var s in r)if("next"!=s&&"last"!=s&&"preview"!=s){var t=document.getElementById(player.id+"_listy_add_"+s);if(t){var u=r[s].action;u||(u=function(a,b){top.console&&console.info('Listy // Missing "action" on "'+s+'" button')}),bind("click",t,u,["Listy // Hint - try jwplayer().plugins.listy.buildCustomItem();"])}}bind("click",c[player.id+"_listy_user_login"],userLogin),bind("keyup",c[player.id+"_listy_user_login"],checkForEnter,["userLogin"]),bind("click",c[player.id+"_listy_user_forgot_password"],userForgotPassword),bind("keyup",c[player.id+"_listy_user_forgot_password"],checkForEnter,["userForgotPassword"]),bind("click",c[player.id+"_listy_user_new_user"],userNew,!0),bind("keyup",c[player.id+"_listy_user_new_user"],checkForEnter,["userNew",!0]),bind("click",c[player.id+"_listy_user_register"],userRegister),bind("keyup",c[player.id+"_listy_user_register"],checkForEnter,["userRegister"]),bind("click",c[player.id+"_listy_pl_edit_new"],newListy),bind("keyup",c[player.id+"_listy_pl_edit_new"],checkForEnter,["newListy"]),bind("click",c[player.id+"_listy_pl_edit_delete"],deleteCurrentListy),bind("keyup",c[player.id+"_listy_pl_edit_delete"],checkForEnter,["deleteCurrentListy"]),bind("click",c[player.id+"_listy_pl_edit_save"],updateNameAndSave),bind("keyup",c[player.id+"_listy_pl_edit_save"],checkForEnter,["updateNameAndSave"]),bind("click",c[player.id+"_listy_pl_edit_load"],getNameAndLoad),bind("keyup",c[player.id+"_listy_pl_edit_load"],checkForEnter,["getNameAndLoad"]),bind("keyup",c[player.id+"_listy_pl_search"],search,"pl"),bind("keyup",c[player.id+"_listy_yt_search"],search,"yt"),bind("keyup",c[player.id+"_listy_sc_search"],search,"sc"),c[config.target]=d;var v=document.getElementById(config.list.target);c[config.list.target]=c.list=v}function newListy(){var a=player.plugins.listy,b=a.state,c=a.refs;b.pl.master={},b.pl.current=[],b.pl.removed=[],b.pl.filtered=[],b.pl.original=[],b.pl.id="",b.pl.name="",b.pl.media_id_count=0,c[player.id+"_listy_edit_name"].value="",drawListy()}function updateNameAndSave(a,b){var c=player.plugins.listy,e=(c.state,c.refs),f=e[player.id+"_listy_edit_name"].value;c.setPlaylistName(f),c.saveListy()}function getNameAndLoad(){var a=player.plugins.listy,c=(a.state,a.refs),d=c[player.id+"_listy_edit_load"]?c[player.id+"_listy_edit_load"].value:"";loadListy(null,[d])}function loadListy(a,b){var c=player.plugins.listy,d=c.state,e=c.refs,f=player.config||player.getConfig();c.isLoggedIn()?d.listy_parse.loadListy(b[0],function(a){d.pl=a,remasterPlaylist(),e[player.id+"_listy_edit_name"]&&(e[player.id+"_listy_edit_name"].value=d.pl.name),drawListy(),d.load_type="inner",d.autoplay=!(!f.autostart||f.autostart!==!0&&"true"!==f.autostart),firstLoad(),updateMyListys(),b&b[1]&&b[1]()}):alert("You need to be logged into Listy before loading playlists")}function remasterPlaylist(){var a=player.plugins.listy,b=a.state,c=[];for(var d in b.pl.master)c.push(b.pl.master[d]);b.pl.original=c,createMasterFromOriginal()}function loadListyByName(a){var b=player.plugins.listy,c=b.state,d=b.refs,e=player.config||player.getConfig();b.isLoggedIn()?c.listy_parse.loadListyByName(a,c.pl,function(a){c.pl=a,remasterPlaylist(),d[player.id+"_listy_edit_name"]&&(d[player.id+"_listy_edit_name"].value=c.pl.name),drawListy(),c.load_type="inner",c.autoplay=!(!e.autostart||e.autostart!==!0&&"true"!==e.autostart),firstLoad(),updateMyListys()}):alert("You need to be logged into Listy before loading playlists")}function uiTabBar(){var a=player.plugins.listy,b=a.state,c=!(!config.users||!config.users.management)&&(isEnabled(config.users)&&isEnabled(config.users.management)),d=c?config.users.management:{},e=isEnabled(config.features.edit),f=config.list.target!=config.target+"_list",g=isEnabled(config.features.shuffle)||e||isEnabled(config.features.search)||!f,h="";if(c||isEnabled(config.features.add)||isEnabled(config.features.add_from_yt)||isEnabled(config.features.add_from_sc)){var i="flash"==b.jwp.mode||parseInt(b.jwp.major,10)>6||6==parseInt(b.jwp.major,10)&&parseInt(b.jwp.minor,10)>=9;h+='<div class="listy-tab-bar">',h+='<ul class="listy-tab-set">',isEnabled(config.features.add_from_sc)&&(h+=uiTab(player.id+"_listy_sc_panel",getLabel(config.features.add_from_sc,"Add from SoundCloud"))),isEnabled(config.features.add_from_yt)&&i&&(h+=uiTab(player.id+"_listy_yt_panel",getLabel(config.features.add_from_yt,"Add from YouTube"))),isEnabled(config.features.add)&&(h+=uiTab(player.id+"_listy_add_panel",getLabel(config.features.add,"Add Item"),g?"":"active")),g&&(h+=uiTab(player.id+"_listy_pl_panel",config.list.label,"active")),c&&(h+=uiTab(player.id+"_listy_user_panel",getLabel(d.sign_in,"SIGN IN"),"listy-user-tab listy-hidden",player.id+"_listy_login"),h+=uiTab(player.id+"_listy_pl_panel",getLabel(d.sign_out,"SIGN OUT"),"listy-user-tab listy-hidden",player.id+"_listy_logout")),h+="</ul>",h+=uiSep(),h+="</div>"}return h}function userLogOut(){var a=player.plugins.listy,b=a.state,c=function(){b.listy_parse.logOut(function(){a.checkUserState()})};a.saveListy(c)}function userLogin(){var a=player.plugins.listy,b=a.state,c=a.refs,d=c[player.id+"_listy_user_email"].value,e=c[player.id+"_listy_user_password"].value;""!=d&&""!=e?b.listy_parse.logIn(d,e,null,function(b){a.checkUserState(player.id+"_listy_pl_panel",b)}):alert("Please enter your Email address and Password")}function registerUser(a,b,c){var d=player.plugins.listy,e=d.state;d.refs;""!=a&&""!=b?e.listy_parse.registerUser(a,b,c,function(a){d.checkUserState(player.id+"_listy_pl_panel",a)}):alert("Please enter your Email address and Password")}function userForgotPassword(){var a=player.plugins.listy,b=a.state,c=a.refs,d=c[player.id+"_listy_user_email"].value;""!=d?b.listy_parse.resetPassword(d,function(){a.checkUserState(),alert("A password reset request has been sent to your Email address.\n\nPlease check your Email and follow the instructions.")}):alert('Please enter your Email address and then select the "Forgot password?" button')}function userNew(a,b){var c=player.plugins.listy,d=c.refs;d[player.id+"_listy_user_new_form"]||(d[player.id+"_listy_user_new_form"]=document.getElementById(player.id+"_listy_user_new_form")),d[player.id+"_listy_user_existing"]||(d[player.id+"_listy_user_existing"]=document.getElementById(player.id+"_listy_user_existing")),b?(addClass(d[player.id+"_listy_user_existing"],"listy-hidden"),removeClass(d[player.id+"_listy_user_new_form"],"listy-hidden")):(addClass(d[player.id+"_listy_user_new_form"],"listy-hidden"),removeClass(d[player.id+"_listy_user_existing"],"listy-hidden"))}function userRegister(){var a=player.plugins.listy,b=a.refs,c=!!config.users&&isEnabled(config.users),d=!(!c||!config.users.management)&&(c&&isEnabled(config.users.management)),e=d?config.users.management:{};if(d){var f=b[player.id+"_listy_user_email"].value,g=b[player.id+"_listy_user_password"].value,h=[],i={};if(""==f&&h.push("Email address: This is required."),""==g&&h.push("Password: This is required."),e.sign_in&&e.sign_in&&e.sign_in.fields)for(var j in e.sign_in.fields){var k=e.sign_in.fields[j],l=k.type?k.type:"";if("heading"!=l&&"paragraph"!=l){var m=validateField(j,k);i[m.nv.name]=m.nv.value,""!=m.error&&h.push(m.error)}}var n=e.sign_in&&e.sign_in.terms_of_use?e.sign_in.terms_of_use:null,o=buildTerms(n),m=validateField("terms_of_use",o.terms_of_use);i[m.nv.name]=m.nv.value,""!=m.error&&h.push(m.error),h.length>0?alert("The following fields have errors. Please review these and try again:\n\n"+h.join("\n")):registerUser(f,g,i)}}function parseID(a,b){for(var c=a.split(b),d="",e=0,f=c.length;e<f;e++){var g=c[e].toLowerCase();if(0==e)d=g;else{var h=g.substring(0,1),i=g.substring(1);d+=h.toUpperCase()+i}}return d}function validateField(a,b){var c=player.plugins.listy,e=(c.state,c.refs),f={};f.error="",f.nv={};var g=a.replace(/[_|-]/gm," ");g=parseID(g," ");var h=b.type?b.type:"text";if("heading"==h||"paragraph"==h);else if("radio"==h||"checkbox"==h){var i=[],j=[],k=0;for(var l in b.options){k++;var m=b.options[l],n=document.getElementById(player.id+"_listy_user_"+a+"_"+k);if(n&&n.checked){var o=m.value?m.value:l;j.push(o)}else m.required&&m.required!==!1&&(m.required===!0?i.push(b.label+" "+m.label+" - This is required."):i.push(b.label+" "+m.required))}f.error=i.join("\n"),f.nv.name=g,f.nv.value=j}else e[player.id+"_listy_user_"+a]&&(f.nv.name=g,f.nv.value=e[player.id+"_listy_user_"+a].value,b.required&&b.required!==!1&&""==f.nv[g]&&(b.required===!0?f.error=b.label+" This is required.":f.error=b.label+" "+b.required));return f}function uiUserOptions(){var a=player.plugins.listy,c=(a.state,a.defaults),d=!!config.users&&isEnabled(config.users),e=!(!d||!config.users.management)&&(d&&isEnabled(config.users.management)),f=e?config.users.management:{},g=f.sign_in&&f.sign_in.buttons?f.sign_in.buttons:{};g.login||(g.login={enabled:!0}),g.new_user||(g.new_user={enabled:!0}),g.forgot_password||(g.forgot_password={enabled:!0});var h="";if(e){h+='<div class="listy-tab-panel listy-hidden" id="'+player.id+'_listy_user_panel">',h+=uiPanelArea(player.id+"_listy_login_form");for(var i in c.sign_in)h+='<div class="listy-form-row">',h+=uiField(i,c.sign_in[i],"user"),h+="</div>";h+=uiSep(),h+='<div class="listy-form-row" id="'+player.id+'_listy_user_existing">';for(var j in g)"login"==j?isDisabled(g.login)||(h+=uiButton(player.id+"_listy_user_login",getLabel(g.login,"Log in"))):"forgot_password"==j?isDisabled(g.forgot_password)||(h+=uiButton(player.id+"_listy_user_forgot_password",getLabel(g.forgot_password,"Forgot password?"))):"new_user"==j?isDisabled(g.new_user)||(h+=uiButton(player.id+"_listy_user_new_user",getLabel(g.new_user,"New User..."))):isDisabled(g[j])||(h+=uiButton(player.id+"_listy_user_"+j,getLabel(g[j],j)));if(h+="</div>",h+='<div class="listy-panel-area listy-hidden" id="'+player.id+'_listy_user_new_form">',f.sign_in&&f.sign_in&&f.sign_in.fields)for(var i in f.sign_in.fields)h+='<div class="listy-form-row">',h+=uiField(i,f.sign_in.fields[i],"user"),h+="</div>";var k=f.sign_in&&f.sign_in.terms_of_use?f.sign_in.terms_of_use:null,l=buildTerms(k);h+='<div class="listy-form-row">',h+=uiField("terms_of_use",l.terms_of_use,"user"),h+="</div>",h+=uiSep(),h+='<div class="listy-form-row">',isDisabled(g.register)||(h+=uiButton(player.id+"_listy_user_register",getLabel(g.register,"Register"))),h+="</div>",h+="</div>",h+="</div>",h+="</div>"}return d&&(h+='<iframe style="width:0;height:0;border:0;margin:0;padding:0;display:none;" id="'+player.id+'_listy_parse"></iframe>'),h}function buildTerms(a){var b=player.plugins.listy,d=(b.state,b.defaults),e={};return e.terms_of_use={},e.terms_of_use.label=a&&a.label?a.label:d.terms_of_use.label,e.terms_of_use.type="checkbox",e.terms_of_use.options={},e.terms_of_use.options.agree={},e.terms_of_use.options.agree.label=a&&a.text?a.text:d.terms_of_use.text,e.terms_of_use.options.agree.label+=' <a target="listy_terms" href="'+(a&&a.url?a.url:d.terms_of_use.url+"?d="+top.location.host)+'">',e.terms_of_use.options.agree.label+=a&&a.link_text?a.link_text:d.terms_of_use.link_text,e.terms_of_use.options.agree.label+="</a>",e.terms_of_use.options.agree.checked=!1,e.terms_of_use.options.agree.required=(a&&a.text?a.text:d.terms_of_use.text)+" "+(a&&a.link_text?a.link_text:d.terms_of_use.link_text),e}function uiListOptions(){var a=isEnabled(config.features.edit),b=config.features.edit&&config.features.edit.options?config.features.edit.options:{},c=config.features.edit&&config.features.edit.buttons?config.features.edit.buttons:{};a&&isDisabled(c.move_up)&&isDisabled(c.remove)&&isDisabled(c.move_down)&&(a=!1);var d=config.list.target!=config.target+"_list",e=isEnabled(config.features.shuffle)||a||isEnabled(config.features.search)||!d,f="";return f+='<div class="listy-tab-panel'+(e?"":" listy-hidden")+'" id="'+player.id+'_listy_pl_panel">',a&&(isEnabled(b.save)||isEnabled(b.load)||isEnabled(b.delete)||isEnabled(b.new))&&(f+='<div class="listy-panel-area listy-save-area listy-hidden" id="'+config.target+'_save">',isEnabled(b.save)&&(f+='<div class="listy-save-row">',f+=uiField("name",{label:"Current:"},"edit"),f+=uiButton(player.id+"_listy_pl_edit_save",getLabel(config.features.edit.options.save,"SAVE")),f+="</div>",f+=uiSep()),isEnabled(b.load)&&(f+='<div class="listy-save-row" id="'+player.id+'_listy_save_row_load">',f+=uiField("load",{label:"My playlists:",type:"select",options:{}},"edit"),f+=uiButton(player.id+"_listy_pl_edit_load",getLabel(config.features.edit.options.load,"LOAD")),f+="</div>",f+=uiSep()),(isEnabled(b.new)||isEnabled(b.delete))&&(f+='<div class="listy-save-row">',isEnabled(b.new)&&(f+=uiButton(player.id+"_listy_pl_edit_new",getLabel(config.features.edit.options.new,"CREATE NEW"))),isEnabled(b.delete)&&(f+=uiButton(player.id+"_listy_pl_edit_delete",getLabel(config.features.edit.options.delete,"DELETE CURRENT"))),f+="</div>"),f+="</div>"),(isEnabled(config.features.shuffle)||a||isEnabled(config.features.search))&&(f+='<div class="listy-options-bar listy-pl-options">',isEnabled(config.features.shuffle)&&(f+=uiButton(player.id+"_listy_pl_shuffle",getLabel(config.features.shuffle,"SHUFFLE"))),a&&(f+=uiButton(player.id+"_listy_pl_edit",getLabel(config.features.edit,"EDIT"))),isEnabled(config.features.export)&&(f+=uiButton(player.id+"_listy_pl_export",getLabel(config.features.export,"EXPORT"))),isEnabled(config.features.search)&&(f+=uiSearchField(player.id+"_listy_pl_search")),f+=uiSep(),f+="</div>"),config.list.target==config.target+"_list"&&(f+='<div class="listy-panel-area listy-pl-area" id="'+config.target+'_list"></div>'),f+="</div>"}function uiAddItem(){var a=config.features.add&&config.features.add.options?config.features.add.options:{},b=a.form?a.form:{},c=a.from_removed?a.from_removed:{},d=b.buttons?b.buttons:{};d.next||(d.next={enabled:!0}),d.last||(d.last={enabled:!0}),d.preview||(d.preview={enabled:!0});var e=isEnabled(config.features.edit),f=config.list.target!=config.target+"_list",g=isEnabled(config.features.shuffle)||e||isEnabled(config.features.search)||!f,h="";if(isEnabled(config.features.add)){h+='<div class="listy-tab-panel'+(g?" listy-hidden":"")+'" id="'+player.id+'_listy_add_panel">',isEnabled(config.features.edit)&&(h+='<div class="listy-options-bar listy-add-options">',h+=uiButton(player.id+"_listy_add_custom",getLabel(b,"New item")),isDisabled(c)||(h+=uiButton(player.id+"_listy_add_removed",getLabel(c,"From removed"))),h+=uiSep(),h+="</div>"),h+=uiPanelArea(player.id+"_listy_add_form");for(var i in config.fields)h+='<div class="listy-form-row">',h+=uiField(i,config.fields[i]),h+="</div>";h+=uiSep(),h+='<div class="listy-form-row">';for(var j in d)"next"==j?isDisabled(d.next)||(h+=uiButton(player.id+"_listy_add_next",getLabel(d.next,"Add as next"))):"last"==j?isDisabled(d.last)||(h+=uiButton(player.id+"_listy_add_last",getLabel(d.last,"Add as last"))):"preview"==j?isDisabled(d.preview)||(h+=uiButton(player.id+"_listy_add_preview",getLabel(d.preview,"Preview item"))):isDisabled(d[j])||(h+=uiButton(player.id+"_listy_add_"+j,getLabel(d[j],j)));h+="</div>",h+="</div>",h+=uiPanelArea(player.id+"_listy_add_list",!0,!0),h+="</div>"}return h}function uiAddYT(){var a="";return isEnabled(config.features.add_from_yt)&&(a+='<div class="listy-tab-panel listy-hidden" id="'+player.id+'_listy_yt_panel">',a+='<div class="listy-options-bar listy-yt-options">',a+=uiSearchField(player.id+"_listy_yt_search"),a+=uiSep(),a+="</div>",a+=uiPanelArea(player.id+"_listy_yt_results",!0),a+="</div>"),a}function uiAddSC(){var a="";return isEnabled(config.features.add_from_sc)&&(a+='<div class="listy-tab-panel listy-hidden" id="'+player.id+'_listy_sc_panel">',a+='<div class="listy-options-bar listy-sc-options">',a+=uiSearchField(player.id+"_listy_sc_search"),a+=uiSep(),a+="</div>",a+=uiPanelArea(player.id+"_listy_sc_results",!0),a+="</div>"),a}function uiTab(a,b,c,d){var e="";return e+='<li class="listy-tab'+(c?" "+c:"")+'" data-panel-id="'+a+'" tabindex="0"'+(d?' id="'+d+'"':"")+">"+b+"</li>"}function uiButton(a,b,c,d){var e="";return e+='<span class="listy-button'+(c?" "+c:"")+'" id="'+a+'" tabindex="0"'+(d?' data-info="'+d+'"':"")+">"+b+"</span>"}function uiSearchField(a){var b="";return b+='<div class="listy-search-wrapper">',b+='<input type="text" id="'+a+'" class="listy-search-field" />',b+='<span class="listy-search-button" data-field-id="'+a+'" tabindex="0"></span>',b+="</div>"}function uiPanelArea(a,b,c){var d="";return d+='<div class="listy-panel-area'+(c?" listy-hidden":"")+'" id="'+a+'">',b&&(d+="</div>"),d}function uiSep(){return'<div class="listy-playlistdivider"></div>'}function uiField(a,b,c){var d=player.plugins.listy,e=d.state,f=b.type?b.type:"text",g="";if("hidden"!=f&&"heading"!=f&&"paragraph"!=f&&(g+='<label for="'+player.id+"_listy_"+(c&&""!=c?c:"add")+"_"+a+'">',g+=getLabel(b,a+":"),g+=b.required&&b.required!==!1?' <span class="listy-required">*</span>':"",g+="</label>"),"text"==f||"hidden"==f||"password"==f)g+='<input type="'+f+'" id="'+player.id+"_listy_"+(c&&""!=c?c:"add")+"_"+a+'" value="'+(b.value?b.value:"")+'" />';else if("textarea"==f)g+='<textarea id="'+player.id+"_listy_"+(c&&""!=c?c:"add")+"_"+a+'">'+(b.value?b.value:"")+"</textarea>";else if("select"==f){g+='<select id="'+player.id+"_listy_"+(c&&""!=c?c:"add")+"_"+a+'">';for(var h in b.options){var i=!0,j=b.options[h];if(j.modes)if("string"==typeof j.modes)j.modes.indexOf(e.jwp.mode)==-1&&(i=!1);else for(var k in j.modes)if(k==e.jwp.mode){var l=j.modes[k];if(l.major&&parseInt(e.jwp.major,10)<parseInt(l.major)&&(i=!1),l.minor&&parseInt(e.jwp.major,10)==parseInt(l.major)&&parseInt(e.jwp.minor,10)<parseInt(l.minor)&&(i=!1),l.browser){for(var m=l.browser.split(","),n=!1,o=0,p=m.length;o<p;o++){var q=m[o];n||"chrome"!=q||(n=jwplayer.utils.isChrome()),n||"safari"!=q||(n=jwplayer.utils.isSafari()),n||"firefox"!=q||(n=jwplayer.utils.isFF()),n||"ie"!=q||(n=jwplayer.utils.isIE())}i&&!n&&(i=!1)}if(l.os){for(var r=l.os.split(","),s=!1,o=0,p=r.length;o<p;o++){var q=r[o];s||"iOS"!=q||(s=jwplayer.utils.isIOS()),s||"iPad"!=q||(s=jwplayer.utils.isIPad()),s||"iPod"!=q||(s=jwplayer.utils.isIPod()),s||"android"!=q||(s=jwplayer.utils.isAndroid())}i&&!s&&(i=!1)}}i&&(g+='<option value="'+h+'">'+j.label+"</option>")}g+="</select>"}else if("checkbox"==f||"radio"==f){g+='<div class="listy-radio-group">';var t=0;for(var h in b.options){t++;var j=b.options[h];g+='<input type="'+f+'" name="'+player.id+"_listy_"+(c&&""!=c?c:"add")+"_"+a+'" id="'+player.id+"_listy_"+(c&&""!=c?c:"add")+"_"+a+"_"+t+'" value="'+h+'"'+(isChecked(j)?' checked="checked"':"")+">",g+='<label for="'+player.id+"_listy_"+(c&&""!=c?c:"add")+"_"+a+"_"+t+'">',g+=j.required&&j.required!==!1?'<span class="listy-required">*</span> ':"",g+=j.label?j.label:h,g+="</label>"}g+="</div>"}else g+="heading"==f||"paragraph"==f?'<span class="listy-form-'+f+'">'+b.label+"</span>":f;return g}function getLabel(a,b){return a&&a.label?a.label:b}function isEnabled(a){var b=!(!a||a.enabled!==!0&&"true"!==a.enabled);return b===!0||"true"===b}function isChecked(a){var b=!(!a||a.checked!==!0&&"true"!==a.checked);return b===!0||"true"===b}function isDisabled(a){var b=!a||a.enabled!==!1&&"false"!==a.enabled;return!b}function clearSearchField(a,b){var c=player.plugins.listy,e=(c.state,c.refs);e[b].value="",e[b].focus(),removeClass(e[b+"_button"],"with-content"),b==player.id+"_listy_pl_search"&&drawListy()}function buildCustomItem(){var a=player.plugins.listy,b=a.state,c=a.refs,d={};d.sources=[];for(var e in config.fields)if(e.indexOf("file")==-1){var f=config.fields[e];if(f.type&&"radio"==f.type){for(var g="",h=1,i="' + player.id + '_listy_add_"+e+"_"+h;c[i];)c[i].checked&&(g=c[i].getAttribute("value")),h++,i="' + player.id + '_listy_add_"+e+"_"+h;d[e]=g}else if(f.type&&"checkbox"==f.type){for(var j=[],h=1,i="' + player.id + '_listy_add_"+e+"_"+h;c[i];)c[i].checked&&j.push(c[i].getAttribute("value")),h++,i="' + player.id + '_listy_add_"+e+"_"+h;d[e]=j}else if(!f.type||f.type&&"heading"!=f.type&&"paragraph"!=f.type){var k=c[player.id+"_listy_add_"+e].value;d[e]=k?k:""}}""==d.mediaid&&(d.mediaid="id_"+buildKey(b.pl.media_id_count));for(var e in config.fields)if(0==e.indexOf("file")){var k=c[player.id+"_listy_add_"+e].value;if(""!=k){var l={};l.file=k,"file_hls"==e&&(l.type="hls"),"file_rtmp"==e&&(l.type="rtmp"),"file_mp4"==e&&(l.type="mp4"),"file"==e&&(l.type=c[player.id+"_listy_add_type"].value),d.sources.push(l)}}return console.info(d),d}function add(a,b){var c=player.plugins.listy,d=c.state,e=c.refs,f=b[0],g=b[1],h="",i=null;"custom"==f&&(d.pl.media_id_count++,i=buildCustomItem()),"yt"!=f&&"sc"!=f&&"direct"!=f||(i=b[2]),"custom"!=f&&"yt"!=f&&"sc"!=f&&"direct"!=f||(h=i.mediaid,(!h||h&&""==h)&&(d.pl.media_id_count++,
		h="id_"+buildKey(d.pl.media_id_count),i.mediaid=h),"youtube"==i.type&&(i.file||(i.file=c.urls.yt_url+h)),addToMaster(h,i),config.events&&config.events.onAdd&&config.events.onAdd(c,player,i)),"removed"==f&&(h=b[2],removeFromRemove(h),e[player.id+"_listy_add_list"].innerHTML="");var j=d.current_item,k=getIndex(j)+1,l=[];if(d.pl.current.length>0)for(var m=0,n=d.pl.current.length;m<n;m++)"next"==g&&m==k&&l.push(h),l.push(d.pl.current[m]),"last"==g&&m==n-1&&l.push(h);else l.push(h);toggleTabs(null,[e[player.id+"_listy_pl_panel"],player.id+"_listy_pl_panel"]),updateListy(l,j),c.isLoggedIn()&&c.saveListy()}function previewCustomItem(){preview(null,[buildCustomItem()])}function updateAddOptions(){var a=player.plugins.listy,b=a.state,c=a.refs;addClass(c[player.id+"_listy_add_custom"],"active"),removeClass(c[player.id+"_listy_add_removed"],"active"),addClass(c[player.id+"_listy_add_removed"],"listy-hidden"),addClass(c[player.id+"_listy_add_list"],"listy-hidden"),removeClass(c[player.id+"_listy_add_form"],"listy-hidden"),b.pl.removed.length>0&&removeClass(c[player.id+"_listy_add_removed"],"listy-hidden")}function sortPL(a){for(var b=player.plugins.listy,c=b.state,d=[],e=[],f=0,g=c.pl.current.length;f<g;f++){var h=c.pl.current[f],i=c.pl.master[h],j=i.published?i.published:"";if(""!=j){var k=new Date(j);j=k.getTime()}e.push(j+"|"+h)}if(e.sort(),"ascending"==a)for(var f=0,g=e.length;f<g;f++){var h=e[f].split("|")[1];d.push(h)}else for(var f=e.length-1;f>=0;f--){var h=e[f].split("|")[1];d.push(h)}return d}function shufflePL(){for(var a=player.plugins.listy,b=a.state,c=b.current_item,d=getIndex(c),e=[],f=[],g=0,h=b.pl.current.length;g<h;g++){var i=b.pl.current[g];if(g<=d)e.push(i);else{var j=buildKey();f.push(j+"|"+i)}}f.sort();for(var g=0,h=f.length;g<h;g++){var i=f[g].split("|")[1];e.push(i)}return e}function getSkinURL(){var a=player.plugins.listy,b=a.state,c="|six|beelden|bekle|five|glow|modieus|roundster|stormtrooper|vapor|",d=player.config||player.getConfig(),e="";if(config.skin&&""!=config.skin)if(config.skin.indexOf(".xml")>-1)e=config.skin;else{var f=config.skin;c.indexOf("|"+f+"|")==-1&&(f="six"),e="6"==b.jwp.major?jwplayer.utils.repo()+"skins/"+f+".xml":"http://p.jwpcdn.com/6/12/skins/"+f+".xml"}else if(d.skin&&""!=d.skin)if(d.skin.indexOf(".xml")>-1)e=d.skin;else{var f=d.skin;c.indexOf("|"+f+"|")==-1&&(f="six"),e="6"==b.jwp.major?jwplayer.utils.repo()+"skins/"+f+".xml":"http://p.jwpcdn.com/6/12/skins/"+f+".xml"}return""==e&&(e=("6"==b.jwp.major?jwplayer.utils.repo():"http://p.jwpcdn.com/6/12/skins/")+"skins/six.xml"),e}function buildKey(a){var b=1,c=575;a=a||0===a?"0"+a:"0"+Math.floor(Math.random()*(c-b+1)+b);for(var d="",e=0,f=3-a.length;e<=f;e++)d+="0";return d+a}function search(a,b){var c=player.plugins.listy,d=c.refs;a=a||event;var e=d[player.id+"_listy_"+b+"_search"].value;13==a.keyCode?""!=e&&("yt"==b?c.listyUI_searchYT(e):"sc"==b?c.listyUI_searchSC(e):"pl"==b&&c.listyUI_searchPlaylist(e)):""!=e?addClass(d[player.id+"_listy_"+b+"_search_button"],"with-content"):(removeClass(d[player.id+"_listy_"+b+"_search_button"],"with-content"),"pl"==b&&drawListy())}function bindYTButtons(){for(var a=document.querySelectorAll("#"+config.target+" .listy-item-yt"),b=0,c=a.length;b<c;b++)bind("mouseover",a[b],ytOptions,[a[b]]);var d=document.getElementById(config.target+"_listy_yt_results_next");d&&bind("click",d,ytResultsPage,[d]);var e=document.getElementById(config.target+"_listy_yt_results_prev");e&&bind("click",e,ytResultsPage,[e])}function bindSCButtons(){for(var a=document.querySelectorAll("#"+config.target+" .listy-item-sc"),b=0,c=a.length;b<c;b++)bind("mouseover",a[b],scOptions,[a[b]]);var d=document.getElementById(config.target+"_listy_sc_results_next");d&&bind("click",d,scResultsPage,[d]);var e=document.getElementById(config.target+"_listy_sc_results_prev");e&&bind("click",e,scResultsPage,[e])}function drawListy(a,b,c){var d=player.plugins.listy,e=d.state,f=d.refs;b||(b="current"),c||(c="list");var g=config.list;if("removed"==b&&(g=d.defaults.list),f[c]){var h="";h+=repStuff(g.start_tpl,player,null);for(var i=0,j=e.pl[b].length;i<j;i++){var k=e.pl.master[e.pl[b][i]];h+=repStuff(g.item_tpl,player,k)}h+=repStuff(g.end_tpl,player,null),f[c].innerHTML=h}if("current"==b||"filtered"==b){updateCurrent();for(var l=null,m=document.querySelectorAll("#"+config.list.target+" ["+config.list.current_selector+"]"),n=0,o=m.length;n<o;n++){var p=m[n].getAttribute(config.list.current_selector);bind("click",m[n],playlistItemClick,p),bind("keyup",m[n],checkForEnter,["playlistItemClick",[p,m[n]]]),bind("mouseover",m[n],editOptions,[m[n],b]),p==a&&(l=m[n])}l&&l.focus()}if("removed"==b)for(var m=document.querySelectorAll("#"+config.target+" #"+player.id+"_listy_add_list ["+config.list.current_selector+"]"),n=0,o=m.length;n<o;n++)bind("click",m[n],removeOptions,[m[n]]),bind("keyup",m[n],checkForEnter,["removeOptions",[m[n]]]),bind("mouseover",m[n],removeOptions,[m[n]]);config.events&&config.events.onRedraw&&config.events.onRedraw(d,player,b)}function firstLoad(a){var b=player.plugins.listy,c=b.state;if(c.pl.current.length>0&&!a){var d=c.pl.current[0],e=JSON.stringify(c.pl.master[d]),f=[{file:b.urls.init_video_url,type:"mp4"}],g=[],h=JSON.parse(e);h.file=b.urls.init_video_url,h.sources=f,h.type="mp4",h.action="firstload|"+h.mediaid,g.push(h),"ready"!=c.load_type&&(c.load_type="first"),player.load(g)}}function preview(a,b){var c=player.plugins.listy,d=c.state,e=b[0];"string"==typeof e&&(e=JSON.parse(Base64.decode(e)));var f=player.getPlaylist(),g=0,h=JSON.stringify(f[g]),i=[],j=JSON.parse(h);j.action="preview|"+j.mediaid;var k=e;k.action="current|"+k.mediaid;var l=k.type;"youtube"==l&&(k.file||(k.file=c.urls.yt_url+k.mediaid));var m=JSON.parse(h);m.action="preview|"+m.mediaid,i.push(j),i.push(k),i.push(m),d.load_type="inner",player.load(i).playlistItem(1)}function checkForEnter(e,params){e=e||event,13==e.keyCode&&(player.plugins.listy[params[0]]?player.plugins.listy[params[0]](e,params[1]):eval(params[0])(e,params[1]))}function playlistItemClick(a,b){var c=player.plugins.listy,d=c.state,e=[];"string"==typeof b?e.push(b):e=b,isNumber(e[0])?sItemMediaID=e[0]<d.pl.current.length?d.pl.current[e[0]]:d.pl.current[0]:sItemMediaID=e[0],config.events&&config.events.onItemSelect&&config.events.onItemSelect(c,player,d.pl.master[sItemMediaID]),load(a,b)}function load(a,b){var c=player.plugins.listy,d=c.state,e=[];if("string"==typeof b?e.push(b):e=b,!d.edit_playlist||d.edit_playlist&&d.edit_playlist!==!0){var f=[],g="";if(g=isNumber(e[0])?e[0]<d.pl.current.length?d.pl.current[e[0]]:d.pl.current[0]:e[0],d.pl.master[g]){d.current_item=g;var h=[{file:c.urls.init_video_url,type:"mp4"}],i=JSON.stringify(d.pl.master[g]),j=c.getPlaylistIndex();j++;var k=JSON.stringify(c.getPlaylistItem(j)),l=JSON.parse(i);l.action="prev|"+g,l.file=c.urls.init_video_url,l.type="mp4",l.sources=h;var m=JSON.parse(i),n=getFileAndType(m);if("mp4"==n.type||"mp3"==n.type){var o=n.file;window.listyCache&&window.listyCache[o]&&window.listyCache[o].length>5&&"blob:"==window.listyCache[o].substring(0,5)?n.default==-1?m.file=window.listyCache[o]:m.sources[n.default].file=window.listyCache[o]:(config.cache_bust&&config.cache_bust===!0&&(o+=o.indexOf("?")>-1?"&listy="+player.id:"?listy="+player.id),n.default==-1?m.file=o:m.sources[n.default].file=o)}m.action="current|"+g;var p=JSON.parse(k);p.action="next|"+g,p.file=c.urls.init_video_url,p.type="mp4",p.sources=h,f.push(l),f.push(m),f.push(p),d.load_type="inner",player.load(f).playlistItem(1),d.current_item=g,updateCurrent(),config.events&&config.events.onPlay&&config.events.onPlay(c,player,g)}}else e[1]&&editOptions(null,e[1])}function toggleTabs(a,b){for(var c=player.plugins.listy,d=document.querySelectorAll("#"+config.target+" .listy-tab"),e=0,f=d.length;e<f;e++)d[e]!=b[0]?removeClass(d[e],"active"):addClass(d[e],"active");for(var d=document.querySelectorAll("#"+config.target+" .listy-tab-panel"),e=0,f=d.length;e<f;e++)addClass(d[e],"listy-hidden");var g=document.getElementById(b[1]);g&&removeClass(g,"listy-hidden"),c.listyUI_editPlaylist(!1)}function toggleAddTabs(a,b){var c=player.plugins.listy,d=c.refs;removeClass(d[player.id+"_listy_add_custom"],"active"),removeClass(d[player.id+"_listy_add_removed"],"active"),addClass(d[b[0]],"active"),addClass(d[player.id+"_listy_add_form"],"listy-hidden"),addClass(d[player.id+"_listy_add_list"],"listy-hidden"),removeClass(d[b[1]],"listy-hidden"),b[0]==player.id+"_listy_add_removed"&&drawListy(null,"removed",player.id+"_listy_add_list")}function hideEdits(a){a||(a="edit");for(var b=document.querySelectorAll("#"+config.list.target+" .listy-"+a+"-options"),c=0,d=b.length;c<d;c++)addClass(b[c],"listy-hidden")}function removeOptions(a,b){var c=player.plugins.listy,d=c.state,e=b[0].getAttribute(config.list.current_selector);if(b[0]){var f=document.getElementById(player.id+"_listy_edit_"+e);if(!f&&(b[0].style.position="relative",f=document.createElement("div"),f.setAttribute("class","listy-edit-options listy-hidden"),f.setAttribute("id",player.id+"_listy_edit_"+e),b[0].appendChild(f),f=document.getElementById(player.id+"_listy_edit_"+e))){bind("mouseout",f,editOut,[f,!0]);var g=config.features.add&&config.features.add.options&&config.features.add.options.from_removed&&config.features.add.options.from_removed.buttons?config.features.add.options.from_removed.buttons:{};g.preview||(g.preview={enabled:!0}),g.last||(g.last={enabled:!0}),g.next||(g.next={enabled:!0});var h="";h+='<div class="listy-edit-mask">&nbsp;</div>',h+='<div class="listy-edit-buttons">';for(var i in g)"preview"==i?isDisabled(g.preview)||(h+=uiButton(player.id+"_listy_remove_preview_"+e,getLabel(g.preview,"Preview"),"listy-remove-option")):"last"==i?isDisabled(g.last)||(h+=uiButton(player.id+"_listy_remove_last_"+e,getLabel(g.last,"+Last"),"listy-remove-option")):"next"==i?isDisabled(g.next)||(h+=uiButton(player.id+"_listy_remove_next_"+e,getLabel(g.next,"+Next"),"listy-remove-option")):isDisabled(g[i])||(h+=uiButton(player.id+"_listy_remove_"+i+"_"+e,getLabel(g[i],i),"listy-remove-option"));h+="</div>",f.innerHTML=h;var j=document.getElementById("#"+player.id+"_listy_remove_preview_"+e);if(j){var k=d.pl.master[e];bind("click",j,preview,[k]),bind("keyup",j,checkForEnter,["preview",[k]])}var l=document.getElementById(player.id+"_listy_remove_last_"+e);l&&(bind("click",l,add,["removed","last",e]),bind("keyup",l,checkForEnter,["add",["removed","last",e]]));var m=document.getElementById(player.id+"_listy_remove_next_"+e);m&&(bind("click",m,add,["removed","next",e]),bind("keyup",m,checkForEnter,["add",["removed","next",e]]));for(var i in g)if("preview"!=i&&"last"!=i&&"next"!=i){var n=document.getElementById(player.id+"_listy_remove_"+i+"_"+e);if(n){var o=g[i].action;o||(o=function(a,b){top.console&&console.info('Listy: Missing "action" on "'+i+'" button')}),bind("click",n,o,[e])}}}f&&(hideEdits(),removeClass(f,"listy-hidden"))}}function ytResultsPage(a,b){var c=player.plugins.listy,e=(c.state,b[0].getAttribute("data-info")),f=e.split("||");c.listyUI_searchYT(f[2],f[1])}function ytOptions(a,b){var c=player.plugins.listy,e=(c.state,b[0].getAttribute("data-mediaid"));if(b[0]){var f=document.getElementById(player.id+"_listy_yt_"+e);if(!f){b[0].style.position="relative",f=document.createElement("div"),f.setAttribute("class","listy-ytedit-options listy-hidden"),f.setAttribute("id",player.id+"_listy_yt_"+e),b[0].appendChild(f),f=document.getElementById(player.id+"_listy_yt_"+e),bind("mouseout",f,editOut,[f,!0,"yt"]);var g=config.features.add_from_yt&&config.features.add_from_yt.buttons?config.features.add_from_yt.buttons:{};g.preview||(g.preview={enabled:!0}),g.last||(g.last={enabled:!0}),g.next||(g.next={enabled:!0});var h="";h+='<div class="listy-edit-mask">&nbsp;</div>',h+='<div class="listy-edit-buttons">';for(var i in g)"preview"==i?isDisabled(g.preview)||(h+=uiButton(player.id+"_listy_yt_preview_"+e,getLabel(g.preview,"Preview"),"listy-yt-option")):"last"==i?isDisabled(g.last)||(h+=uiButton(player.id+"_listy_yt_last_"+e,getLabel(g.last,"+Last"),"listy-yt-option")):"next"==i?isDisabled(g.next)||(h+=uiButton(player.id+"_listy_yt_next_"+e,getLabel(g.next,"+Next"),"listy-yt-option")):isDisabled(g[i])||(h+=uiButton(player.id+"_listy_yt_"+i+"_"+e,getLabel(g[i],i),"listy-yt-option"));h+="</div>",f.innerHTML=h;var j=b[0].getAttribute("data-item"),k=j&&""!=j?JSON.parse(Base64.decode(j)):{},l=document.getElementById(player.id+"_listy_yt_preview_"+e);l&&(bind("click",l,preview,[j]),bind("keyup",l,checkForEnter,["preview",[j]]));var m=document.getElementById(player.id+"_listy_yt_last_"+e);m&&(bind("click",m,add,["yt","last",k]),bind("keyup",m,checkForEnter,["add",["yt","last",k]]));var n=document.getElementById(player.id+"_listy_yt_next_"+e);n&&(bind("click",n,add,["yt","next",k]),bind("keyup",n,checkForEnter,["add",["yt","next",k]]));for(var i in g)if("preview"!=i&&"last"!=i&&"next"!=i){var o=document.getElementById(player.id+"_listy_yt_"+i+"_"+e);o&&bind("click",o,g[i].action,[k])}}hideEdits("ytedit"),removeClass(f,"listy-hidden")}}function scResultsPage(a,b){var c=player.plugins.listy,e=(c.state,b[0].getAttribute("data-info")),f=e.split("||");c.listyUI_searchSC(f[2],f[1])}function scOptions(a,b){var c=player.plugins.listy,e=(c.state,b[0].getAttribute("data-mediaid"));if(b[0]){var f=document.getElementById(player.id+"_listy_sc_"+e);if(!f){b[0].style.position="relative",f=document.createElement("div"),f.setAttribute("class","listy-scedit-options listy-hidden"),f.setAttribute("id",player.id+"_listy_sc_"+e),b[0].appendChild(f),f=document.getElementById(player.id+"_listy_sc_"+e),bind("mouseout",f,editOut,[f,!0,"sc"]);var g=config.features.add_from_sc&&config.features.add_from_sc.buttons?config.features.add_from_sc.buttons:{};g.preview||(g.preview={enabled:!0}),g.last||(g.last={enabled:!0}),g.next||(g.next={enabled:!0});var h="";h+='<div class="listy-edit-mask">&nbsp;</div>',h+='<div class="listy-edit-buttons">';for(var i in g)"preview"==i?isDisabled(g.preview)||(h+=uiButton(player.id+"_listy_sc_preview_"+e,getLabel(g.preview,"Preview"),"listy-sc-option")):"last"==i?isDisabled(g.last)||(h+=uiButton(player.id+"_listy_sc_last_"+e,getLabel(g.last,"+Last"),"listy-sc-option")):"next"==i?isDisabled(g.next)||(h+=uiButton(player.id+"_listy_sc_next_"+e,getLabel(g.next,"+Next"),"listy-sc-option")):isDisabled(g[i])||(h+=uiButton(player.id+"_listy_sc_"+i+"_"+e,getLabel(g[i],i),"listy-sc-option"));h+="</div>",f.innerHTML=h;var j=b[0].getAttribute("data-item"),k=j&&""!=j?JSON.parse(Base64.decode(j)):{},l=document.getElementById(player.id+"_listy_sc_preview_"+e);l&&(bind("click",l,preview,[j]),bind("keyup",l,checkForEnter,["preview",[j]]));var m=document.getElementById(player.id+"_listy_sc_last_"+e);m&&(bind("click",m,add,["sc","last",k]),bind("keyup",m,checkForEnter,["add",["sc","last",k]]));var n=document.getElementById(player.id+"_listy_sc_next_"+e);n&&(bind("click",n,add,["sc","next",k]),bind("keyup",n,checkForEnter,["add",["sc","next",k]]));for(var i in g)if("preview"!=i&&"last"!=i&&"next"!=i){var o=document.getElementById(player.id+"_listy_sc_"+i+"_"+e);o&&bind("click",o,g[i].action,[k])}}hideEdits("scedit"),removeClass(f,"listy-hidden")}}function editOptions(a,b){var c=player.plugins.listy,d=c.state;if(d.edit_playlist&&d.edit_playlist===!0){var e=b[0].getAttribute(config.list.current_selector);if(b[0]){var f=document.getElementById(player.id+"_listy_edit_"+e);if(!f){b[0].style.position="relative",f=document.createElement("div"),f.setAttribute("class","listy-edit-options listy-hidden"),f.setAttribute("id",player.id+"_listy_edit_"+e),b[0].appendChild(f),f=document.getElementById(player.id+"_listy_edit_"+e),bind("mouseout",f,editOut,[f]);var g=config.features.edit&&config.features.edit.buttons?config.features.edit.buttons:{};g.move_up||(g.move_up={enabled:!0}),g.remove||(g.remove={enabled:!0}),g.move_down||(g.move_down={enabled:!0});var h="";h+='<div class="listy-edit-mask">&nbsp;</div>',h+='<div class="listy-edit-buttons">';for(var i in g)"move_up"==i?!isDisabled(g.move_up)&&"current"==b[1]&&getIndex(e)>0&&(h+=uiButton(player.id+"_listy_edit_up_"+e,getLabel(g.move_up,"↑"))):"remove"==i?isDisabled(g.remove)||(h+=uiButton(player.id+"_listy_edit_remove_"+e,getLabel(g.remove,"REMOVE"),"listy-button-remove")):"move_down"==i?!isDisabled(g.move_down)&&"current"==b[1]&&getIndex(e)<d.pl.current.length-1&&(h+=uiButton(player.id+"_listy_edit_down_"+e,getLabel(g.move_down,"↓"))):isDisabled(g[i])||(h+=uiButton(player.id+"_listy_edit_"+i+"_"+e,getLabel(g[i],i),"listy-button-custom"));h+="</div>",f.innerHTML=h;var j=document.getElementById(player.id+"_listy_edit_up_"+e);j&&(bind("click",j,move,[e,-1]),bind("keyup",j,checkForEnter,["move",[e,-1]]));var k=document.getElementById(player.id+"_listy_edit_remove_"+e);k&&(bind("click",k,remove,[e,b[1]]),bind("keyup",k,checkForEnter,["remove",[e,b[1]]]));var l=document.getElementById(player.id+"_listy_edit_down_"+e);l&&(bind("click",l,move,[e,1]),bind("keyup",l,checkForEnter,["move",[e,1]]));for(var i in g)if("move_up"!=i&&"move_down"!=i&&"remove"!=i){var m=document.getElementById(player.id+"_listy_edit_"+i+"_"+e);if(m){var n=g[i].action;n||(n=function(a,b){top.console&&console.info('Listy: Missing "action" on "'+i+'" button')}),bind("click",m,n,[e])}}}hideEdits(),removeClass(f,"listy-hidden")}}}function editOut(a,b){var c=player.plugins.listy.state,d=b[0],e=b[2]?b[2]:"edit";(b[1]||c.edit_playlist&&c.edit_playlist===!0)&&("string"==typeof d&&(d=document.getElementById(player.id+"_listy_"+e+"_"+d)),d&&addClass(d,"listy-hidden"))}function move(a,b){for(var c=player.plugins.listy,d=c.state,e=b[0],f=getIndex(e),g=f+b[1],h=[],i=0,j=d.pl.current.length;i<j;i++)i==g?(1==b[1]&&h.push(d.pl.current[i]),h.push(e),b[1]==-1&&h.push(d.pl.current[i])):i==f||h.push(d.pl.current[i]);updateListy(h,e)}function removeFromRemove(a){for(var b=player.plugins.listy,c=b.state,d=[],e=0,f=c.pl.removed.length;e<f;e++)c.pl.removed[e]!=a&&d.push(c.pl.removed[e]);c.pl.removed=d}function remove(a,b){var c=player.plugins.listy,d=c.state,e=[];"string"==typeof b?e.push(b):e=b;for(var f=[],g="",h=0,i=d.pl.current.length;h<i;h++)d.pl.current[h]==e[0]?(d.pl.removed.push(e[0]),h<i-1?g=d.pl.current[h+1]:h>0&&(g=d.pl.current[h-1])):f.push(d.pl.current[h]);e[1]&&"current"!=e[1]?(d.pl.current=f,search({keyCode:13},"pl")):updateListy(f,g),config.events&&config.events.onRemove&&config.events.onRemove(c,player,e[0])}function updateListy(a,b){var c=player.plugins.listy,d=c.state;d.pl.current=a,setTimeout(function(){drawListy(b)},5)}function removeClass(a,b){if(a){var c=a.getAttribute("class"),d=[];if(c&&""!=c){for(var e=c.split(" "),f=0,g=e.length;f<g;f++)e[f]!=b&&d.push(e[f]);var h=d.join(" ");a.setAttribute("class",h)}}}function addClass(a,b){if(a){var c=a.getAttribute("class");c&&""!=c?(c=" "+c+" ",c.indexOf(" "+b+" ")==-1&&(c+=b," "==c.substring(0,1)&&(c=c.substring(1)),a.setAttribute("class",c))):(c=b,a.setAttribute("class",c))}}function bind(a,b,c,d){if(b)if(b.addEventListener)b.addEventListener(a,function(a){c(a,d)},!1);else if(b.attachEvent)b.attachEvent("on"+a,function(a){c(a,d)});else{var e=b["on"+a];e&&"function"==typeof e?b["on"+a]=function(a){e&&e(a),c(a,d)}:b["on"+a]=function(a){c(a,d)}}}function updateCurrent(){for(var a=player.plugins.listy.state,b=a.current_item,c=document.querySelectorAll("#"+config.list.target+" ["+config.list.current_selector+"]"),d=0,e=c.length;d<e;d++){var f=c[d].getAttribute(config.list.current_selector);f!=b?removeClass(c[d],"active"):(addClass(c[d],"active"),scrollIntoView(c[d]))}checkPrefetchQueue()}function scrollIntoView(a){var b=player.plugins.listy,c=b.refs,d=a.offsetTop+a.offsetHeight,e=c[config.list.target].offsetHeight+c[config.list.target].scrollTop,f=c[config.list.target].scrollHeight-c[config.list.target].offsetHeight;if(a.offsetTop<c[config.list.target].scrollTop||d<c[config.list.target].scrollTop||a.offsetTop>e||d>e){var g=a.offsetTop-(c[config.list.target].offsetHeight/2-a.offsetHeight/2);scrollTo(c[config.list.target],g,f,3)}}function scrollTo(a,b,c,d){d=d||3;var e=parseInt(a.scrollTop,10),f=-d;b>e&&(f=d),e+=f,f>0&&e>b&&(e=b),f<0&&e<b&&(e=b),b<0&&(b=0),b>c&&(b=c),a.scrollTop=e,b!=e&&(ret=setTimeout(function(){scrollTo(a,b,c,d)},0))}function getIndex(a){for(var b=player.plugins.listy.state,c=-1,d=0,e=b.pl.current.length;d<e;d++)b.pl.current[d]==a&&(c=d);return c}function getNextPrev(a){for(var b=player.plugins.listy.state,c={},d=0,e=b.pl.current.length;d<e;d++)if(b.pl.current[d]==a){var f=0==d?e-1:d-1,g=d==e-1?0:d+1;c.prev=b.pl.current[f],c.next=b.pl.current[g]}return c}function isNumber(a){return!isNaN(parseFloat(a))&&isFinite(a)}function repStuff(sIn,player,item){var sOut="";if(sIn.indexOf("{{")>-1)for(var aOut=sIn.split("{{"),iO=0,iOE=aOut.length;iO<iOE;iO++)if(aOut[iO].indexOf("}}")>-1){var aRep=aOut[iO].split("}}");sOut+=eval(aRep[0]),sOut+=aRep[1]}else sOut+=aOut[iO];else sOut=sIn;return sOut}function checkAndLoad(){var a=player.plugins.listy,b=a.state,c=player.config||player.getConfig(),d=[],e=!0;for(var f in a.tubey.pl.got){var g=a.tubey.pl.got[f];"complete"==g.status?d=d.concat(g.list):e=!1}e===!0&&(player.setControls(a.tubey.controls),a.tubey["try-play"]=!(!c.autostart||c.autostart!==!0&&"true"!==c.autostart),"inner"==b.load_type,freshLoad(d,"inner","Default",!0))}function getTubeyPlaylist(a,b){var c=player.plugins.listy;c.tubey.pl.got[a]||(c.tubey.pl.got[a]={status:"processing",list:[]}),isNumber(a)?getSCPLI(a,function(a,b,d,e){a.length>0&&(c.tubey.pl.got[b].list=c.tubey.pl.got[b].list.concat(a)),e?getTubeyPlaylist(b,e):(c.tubey.pl.got[b].status="complete",checkAndLoad())},b):getYTPLI(a,function(a,b,d,e){a.length>0&&(c.tubey.pl.got[b].list=c.tubey.pl.got[b].list.concat(a)),e?getTubeyPlaylist(b,e):(c.tubey.pl.got[b].status="complete",checkAndLoad())},b)}function getSCPLI(a,b,c){var d=player.plugins.listy,f=(d.refs,"e71e48d7e5887847c44c618951388b6a");b?window.SC?(SC.initialize({client_id:f}),SC.get("/playlists/"+a,function(c){var d=null,e=null,g=c.tracks?c.tracks:c;if(c.next_href){for(var h=c.next_href.split("&"),i={},j=0,k=h.length;j<k;j++){var l=h[j].split("=");i[l[0]]=l[1]}i.offset&&(d=i.offset,i.limit&&parseInt(i.offset,10)>parseInt(i.limit,10)&&(e=parseInt(i.offset,10)-2*parseInt(i.limit,10)))}for(var m=[],n=0,o=g.length;n<o;n++){var p=g[n];if(p&&p.streamable){var q={};q.index=n+1,q.type="mp3",q.mediaid="sc"+p.id,q.duration=timeFormat(p.duration/1e3),q.published=p.last_modified?p.last_modified:p.created_at,q.image=p.artwork_url;var r=p.title;r=r.replace(/[\u2018\u2019]/g,"'").replace(/[\u201C\u201D]/g,'"'),r=r.replace(/[\u2013\u2014]/g,"-").replace(/[\u2026]/g,"..."),q.title=r,q.file=p.stream_url+"?client_id="+f,m.push(q)}}b(m,a,e,d)})):(top.console&&console.info("Listy // Oops! SC not available"),setTimeout(function(){getSCPLI(a,b,c)},1e3)):top.console&&console.info('Listy // Oops! "getSCPLI" requires a callback function as the second parameter.')}function getYTPLI(a,b,c){var d=player.plugins.listy;if(b){var e=d.urls.yt_playlist_url,f={};f.key="AIzaSyDzkwGeN2FhKzaQu1NnNxqL_jsLqSJmtd4",f.maxResults=50,f.playlistId=a,c&&(f.pageToken=c);for(var g in f)e+="&"+g+"="+f[g];getURL(e,function(c){var e=[],f=JSON.parse(c);if(!f.error&&f.items&&f.items.length>0)for(var g=0,h=f.items.length;g<h;g++){var i=f.items[g];if(i.snippet&&i.snippet.thumbnails){var j={};j.index=g+1,j.type="youtube",j.mediaid=i.snippet.resourceId.videoId,j.published=i.snippet.publishedAt,j.file=d.urls.yt_url+i.snippet.resourceId.videoId;var k=i.snippet.thumbnails?i.snippet.thumbnails.high?i.snippet.thumbnails.high:i.snippet.thumbnails.medium?i.snippet.thumbnails.medium:i.snippet.thumbnails.default:"";j.image=k.url;var l=i.snippet.title;l=l.replace(/[\u2018\u2019]/g,"'").replace(/[\u201C\u201D]/g,'"'),l=l.replace(/[\u2013\u2014]/g,"-").replace(/[\u2026]/g,"..."),j.title=l;var m=i.snippet.description;m=m.replace(/[\u2018\u2019]/g,"'").replace(/[\u201C\u201D]/g,'"'),m=m.replace(/[\u2013\u2014]/g,"-").replace(/[\u2026]/g,"..."),j.description=m,e.push(j)}}b(e,a,f.prevPageToken?f.prevPageToken:null,f.nextPageToken?f.nextPageToken:null)})}else top.console&&console.info('Listy // Oops! "getYTPLI" requires a callback function as the second parameter.')}function getURL(a,b){var c;if(checkXDomain(a)&&window.XDomainRequest){c=new window.XDomainRequest,c.ontimeout=c.onprogress=function(){},c.timeout=5e3;try{c.open("GET",a,!0),c.onload=function(){b(c.responseText)},c.send(null)}catch(b){top.console&&console.info("Listy: Oops! XDomainRequest: "+b+": "+a)}}else{c=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP");try{c.overrideMimeType&&c.overrideMimeType("text/plain"),c.open("GET",a,!0),c.onreadystatechange=function(){4===c.readyState&&b(200==c.status?c.responseText:'{"error":"'+c.status+'"}')},c.send(null)}catch(a){b('{"error":"'+a+'"}')}}}function checkXDomain(a){return a&&a.indexOf("://")>=0&&a.split("/")[2]!=window.location.href.split("/")[2]}function timeFormat(a){if(isNumber(a)){if(0<a){var b=Math.floor(a/3600),c=Math.floor((a-3600*b)/60);return a=Math.floor(a%60),(b?b+":":"")+(10>c?"0":"")+c+":"+(10>a?"0":"")+a}return"00:00"}return a}function getSkin(a,b){var c=player.plugins.listy,d=c.skins,e=c.refs;d.refs[a]?b&&""!=b&&addClass(e[b],"listy-clear listy-"+d.refs[a].toLowerCase()):getURL(a,function(c){loadSkin(a,c,b)})}function loadSkin(a,b,c){var d=player.plugins.listy,e=d.refs,f=d.skins;if(!f.refs[a]){var g=getNM(b),h=g.get("skin"),i=g.clean(h[0]);if(i.name){f.refs[a]=i.name;var j=document.getElementById("jwp_skin_"+i.name.toLowerCase());if(!j){f.data[i.name]={};for(var k=g.get("component"),l=0,m=k.length;l<m;l++)if("playlist"==k[l].attr.name){for(var n=g.get("setting",[k[l]]),o=0,p=n.length;o<p;o++)"setting"==n[o].tag&&(f.data[i.name][n[o].attr.name]=n[o].attr.value);for(var q=g.get("element",[k[l]]),r=0,s=q.length;r<s;r++)"element"==q[r].tag&&(f.data[i.name][q[r].attr.name]=q[r].attr.src)}buildSkin(i.name)}}}c&&""!=c&&addClass(e[c],"listy-clear listy-"+f.refs[a].toLowerCase())}function checkColor(a){var b=a;return"0x"==a.substring(0,2)&&(b=a.substring(2)),b}function buildSkin(a){var b=player.plugins.listy,c=b.skins.data,d={};d["{} .jw-icon-playlist"]="display:none!important;",d["{} .jw-related-dock-btn"]="display:none!important;",d["*"]="box-sizing:border-box;",d["ul li,ol li"]="margin:0;",d["<.listy-clear:before,<.listy-clear:after"]='content:"";display:table;',d["<.listy-clear:before,<.listy-clear:after"]='content:"";display:table;',d["<.listy-clear:after"]="clear:both;",d[".listy-panel-area"]="background-color:#"+checkColor(c[a].backgroundcolor)+";overflow: auto;",d[".listy-tab-bar,.listy-options-bar"]="background-color:#"+checkColor(c[a].backgroundcolor)+";background-image:url("+c[a].itemActive+");font:"+c[a].fontsize+"px Arial, Helvetica, sans-serif;background-size:100% 100%;",d[".listy-tab-set"]="width:100%;list-style:none;margin:0px;padding:0px;",d[".listy-tab,.listy-button"]="float:left;background-color:#"+checkColor(c[a].titlecolor)+";background-image:url("+c[a].itemActive+");background-size: cover;color:#"+checkColor(c[a].fontcolor)+";font-size:"+c[a].titlesize+"px;font-weight:"+c[a].titleweight+";line-height:18px;padding:5px;margin:8px 0 8px 8px;cursor:pointer;border-radius:5px;border:2px solid #"+checkColor(c[a].titlecolor)+";",d[".listy-tab"]="float:right;margin:8px 8px 8px 0;",d[".listy-tab.active,.listy-button.active"]="background-image: url("+c[a].item+");color:#"+checkColor(c[a].titleactivecolor)+";",d[".listy-tab:hover,.listy-button:hover"]="background-image: url("+c[a].item+");color:#"+checkColor(c[a].titleovercolor)+";",d[".listy-search-wrapper"]="float:right;position:relative;margin:8px 8px 8px 0;width:50%;",d[".listy-search-field"]="font-size:"+c[a].titlesize+"px;font-weight:"+c[a].titleweight+";line-height:18px;padding:5px;padding-right:30px;margin:0;border-radius:5px;border:2px solid #"+checkColor(c[a].titlecolor)+";width:100%;",d[".listy-search-button"]="display:block;position:absolute;width:22px;height:22px;right:5px;top:5px;cursor:pointer;background-repeat: no-repeat;background-position: center;background-size: 20px 20px;background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAABq0lEQVRIx8VVPUsDQRQMImIhksJCUomFhbWIhbWFhYiFWFiISKpgEUTETqxSHnLfB1f4C0QsxUosJEiwsBCLEIKIVQhBREKchbfwWLzbveTAheHC3ezM23m7m0LhP4bruiXHcc6BOtAD+sA7cAVsR1E0PrQ4BI5IdJCCJxSxOIy4b9s2F/oGHoE7oKmYdGCynEX8UEwkgx/gzPf9ohLdCt4/sCLanufNaMUFCeSuFIfQehI3DMMJcK4Fl/gXJtUfs6XXdHyxMvA+id8LgmBKZ3BL1fSxmlnDSGsyqrQVS3KLyK+mPYPoButFVWfwQeTnDAZrrA8nOoMGVdI1PUQwqMi+4feezsBneW4Z9uBezkHfFnTVrLIz8Kbu/z/4+ywes1hBvGFbtY6q5hPEy3TCByyiitZAbE/lOvgCLjH5ANgBTsUdxIX5tWJqMieWzCerz7RvRiY4lZN0stsyZ5a3uLZf1Pfsu5mJGHEcj4G8BOxiYhnPTTS/RH2wkqLKZKLZSVZajLmZqAbMpDmygRgQshL6YeViIE2Uf7sGduR0bgbMpAO4EC+Ormg4fgGoKjA0T+v/hwAAAABJRU5ErkJggg==);",d[".listy-search-button.with-content"]="background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAABgElEQVRIx8VVO07EMBTcGlEiDoA4AeIEiENwBpQyV0hNld9BcgAqDrByRYlcohVFqgjtzlslq5fJe0kWgYg0ihL7zdjjsb3Z/OdTVdVVURQJ0AAR6HrE/l8ifc4mruv6AsUZ0AL7BUifTGpWkZdleYOCsIL4hDzP5R2kdg15VEWT90JbdEV6W4J0HoDv74HAg/Sh72Da1Xuup95hNE9A6lmDthfg0VirzEpLq6Z7JFfWpey5kKv2BxJpR+mSuNE0v1B0T+uT6pHTAG/Ff1UvSLRAY3i7s0Qc8g+jvtEC0fF5B4KRiEdu1EYt0M1EzxQZyL0oC+dEwANsyVgA/551hDnOLBDnojizMd0Is0XNGnKxBbhbKTJa5IR99NJirckgQmuQ6OLjRlP+fWK7X3tR5Aij7yX+vav2dnKMG0fFVjrptHCERQTtQv46e1T0ozgddmq6W44iRxh4o5rg3g18XBu78+fHNYmEuX3hiC9fOGTX6Mp0LDr/yqRo/s2l/5vPAUrTqRSqVbDsAAAAAElFTkSuQmCC);",d[".listy-results-next-page"]="float:right;margin:8px;",d[".listy-edit-options,.listy-ytedit-options,.listy-scedit-options"]="font:"+c[a].fontsize+"px Arial, Helvetica, sans-serif;position:absolute;top:0;left:0;bottom:0;right:0;z-index:3;",d[".listy-edit-mask"]="z-index:1;position:absolute;background-color:#"+checkColor(c[a].backgroundcolor)+";top:2px;left:0;bottom:2px;right:0;opacity:0.7;",d[".listy-edit-buttons"]="z-index:2;position:absolute;top:0;left:0;bottom:0;right:0;padding-top:20px;text-align:center;",d[".listy-edit-options .listy-button,.listy-ytedit-options .listy-button,.listy-scedit-options .listy-button"]="float:none;min-width:30px;display:inline-block;",d[".listy-edit-options .listy-button-remove"]="width:75px;",d[".listy-edit-options .listy-remove-option"]="min-width:50px;width:auto;",d["#"+player.id+"_listy_add_form, #"+player.id+"_listy_login_form"]="font:"+c[a].fontsize+"px Arial, Helvetica, sans-serif;",d["#"+player.id+"_listy_add_form .listy-button, #"+player.id+"_listy_login_form #"+player.id+"_listy_user_login, #"+player.id+"_listy_login_form #"+player.id+"_listy_user_register, #"+player.id+"_listy_pl_edit_new"]="float:right;margin:8px 8px 16px 0;",d[".listy-form-row, .listy-save-row"]="float:left;padding:6px 0 0 6px;width:95%;box-sizing:border-box;",d[".listy-form-row label"]="float:left;display:inline-block;color:#"+checkColor(c[a].fontcolor)+";width:20%;text-align:right;padding:15px 0 0 0;box-sizing:border-box;",d[".listy-form-row a"]="color:#"+checkColor(c[a].titleovercolor)+";",d[".listy-form-heading,.listy-form-paragraph"]="float:left;display:inline-block;color:#"+checkColor(c[a].fontcolor)+";width:100%;font-weight:bold;font-size: 16px;padding:15px 0 0 25%;box-sizing:border-box;",d[".listy-form-paragraph"]="font-weight:normal;font-size: 12px;",d[".listy-form-row input[type=text],.listy-form-row input[type=password],.listy-form-row textarea,.listy-form-row select,.listy-radio-group"]="float:right;width:70%;font-size:"+c[a].titlesize+"px;font-weight:"+c[a].titleweight+";line-height:18px;padding:5px;margin:8px 8px 8px 0;border-radius:5px;border:2px solid #"+checkColor(c[a].titlecolor)+";",d[".listy-save-row label"]="float:left;display:inline-block;color:#"+checkColor(c[a].fontcolor)+";width:30%;text-align:right;padding:15px 10px 0 0;box-sizing:border-box;font:"+c[a].fontsize+"px Arial, Helvetica, sans-serif;",d[".listy-save-row input[type=text],.listy-save-row select"]="float:left;width:50%;font-size:"+c[a].titlesize+"px;font-weight:"+c[a].titleweight+";line-height:18px;padding:5px;margin:8px 8px 8px 0;border-radius:5px;border:2px solid #"+checkColor(c[a].titlecolor)+";",
		d[".listy-save-row .listy-button"]="float:right;margin:8px 8px 16px 0;",d[".listy-form-row textarea"]="height:50px;",d[".listy-radio-group input"]="float:left;clear:both;width:auto;",d[".listy-radio-group label"]="float:left;margin:0 0 0 5px;padding:1px;width:auto;",d[".listy-playlist"]="background-color:#"+checkColor(c[a].backgroundcolor)+";",d[".listy-pl-area"]="position:relative;",d[".listy-pl"]="width:100%;list-style:none;margin:0px;padding:0px;",d[".listy-item"]="background-image: url("+c[a].item+");background-size:100% 100%;cursor:pointer;width:100%;float:left;",d[".listy-item.active"]="color:#"+checkColor(c[a].activecolor)+";background-image:url("+c[a].itemActive+");",d[".listy-item:focus"]="outline-color:#"+checkColor(c[a].titleovercolor)+";",d[".listy-playlistdivider"]="background-image:url("+c[a].divider+");background-size:100% 2px;width:100%;height:2px;clear:both;",d[".listy-playlistimg"]="background-image:url("+c[a].itemImage+");height:54px;width:96px;margin:12px 0px 12px 12px;float:left;",d[".listy-fill"]="background-position:50% 50%;background-size:cover;",d[".listy-textwrapper"]="color:#"+checkColor(c[a].fontcolor)+";font:"+c[a].fontsize+"px Arial, Helvetica, sans-serif;display:block;font-weight:"+c[a].fontweight+";padding:10px 10px 10px 120px;",d[".listy-item:hover .listy-textwrapper"]="color:#"+checkColor(c[a].overcolor)+";",d[".listy-item.active .listy-textwrapper"]="color:#"+checkColor(c[a].activecolor)+";",d[".listy-title"]="display: block;color:#"+checkColor(c[a].titlecolor)+";font-size:"+c[a].titlesize+"px;font-weight:"+c[a].titleweight+";line-height:18px;",d[".listy-item:hover .listy-title"]="color:#"+checkColor(c[a].titleovercolor)+";",d[".listy-item.active .listy-title"]="color:#"+checkColor(c[a].titleactivecolor)+";",d[".listy-description"]="display: block;line-height: 20px;",d[".listy-duration"]="float:right;",d[".listy-hidden"]="display:none;";var e=document.createElement("style");e.setAttribute("type","text/css"),e.setAttribute("id","jwp_skin_"+a.toLowerCase()),document.getElementsByTagName("head")[0].appendChild(e);var f="";for(var g in d)for(var h=g.split(","),i=0,j=h.length;i<j;i++){var k=h[i],l=" ";"<"==k.substring(0,1)&&(k=k.substring(1),l=""),f+=".listy-"+a.toLowerCase()+l+k+"{",f+=d[g],f+="}"}e.styleSheet?e.styleSheet.cssText=f:e.innerHTML=f}function addCSSRule(a,b,c){a.insertRule?a.insertRule(b+"{"+c+"}"):a.addRule(b,c)}function insertAfter(a,b){b.parentNode.insertBefore(a,b.nextSibling)}function getNM(a,b){var c=["?xml","![cdata[","!--","img","source","track","br","hr","input","link","meta","basefont","base","area","param","col"],d=["!--","--","![endif]","![cdata[","script","style","link"];a=a&&""!=a?a:document.body.innerHTML;var e=a.split("<"),f="",g=0,h={map:{},init:function(){for(var a in e)if(""!=e[a]&&e[a].indexOf(">")>-1){var b=e[a].substring(0,e[a].indexOf(">")),h=e[a].substring(e[a].indexOf(">")+1),i=!1,j=!1,k=!1;if(!this.ignoreTags(d,b)){b=b.replace(/(\r\n|\n|\r|\t)/gm,""),g++,aTD=b.split(" ");var l=aTD[0].toLowerCase(),m="",n="";if("/"==b.substring(b.length-1)||"?"==b.substring(b.length-1)||this.zcont(c,l))m=f+"~"+l+"@"+g,n=m,"/"!=b.substring(b.length-1)&&"?"!=b.substring(b.length-1)||(b=b.substring(0,b.length-1)),j=!0;else if("/"==l.substring(0,1))if(this.zcont(c,l.substring(1)));else{k=!0;var o=f.split("~"),p=o.length;f="";for(var q=p-1,r=1;r<q;r++)f+="~"+o[r];m=f}else i=!0,f+="~"+l+"@"+g,m=f;for(m=m.toLowerCase();m.lastIndexOf("~")>-1;){var s={},t=[],u=[],v=[];this.map[m]&&(s=this.map[m],t=s.family,u=s.html,v=s.content),s.fulltag||(s.fulltag=b);var w="";i&&(w=f),j&&(w=n),t.push(w),u.push("<"+e[a]),v.push(h),s.family=t,s.html=u,s.content=v,""!=m&&(this.map[m]=s),m=0!=m.lastIndexOf("~")?m.substring(0,m.lastIndexOf("~")):""}}}for(var x in this.map){var y=this.map[x].fulltag,z=y.split(" "),A=z[0].toLowerCase();this.map[x].attr={};for(var B=0,C=z.length;B<C;B++){var D=z[B],E=!1,F='"',G=D.indexOf("=");if(G>-1){E=!0,D.indexOf("='")==G&&(F="'");var H=D.substring(D.length-1)==F,I=D.substring(D.length-2)=="\\"+F;if(!H||I)for(;B<C&&(!H||I);)B++,B<C&&(D+=" "+z[B]),H=D.substring(D.length-1)==F,I=D.substring(D.length-2)=="\\"+F}if(E){var J=D.substring(0,D.indexOf("=")),K=D.substring(D.indexOf("=")+1);K.substring(0,1)==F&&(K=K.substring(1)),K=K.length>1&&K.substring(K.length-1)==F?K.substring(0,K.length-1):"",this.map[x].attr[J.toLowerCase()]=K}}this.zcont(c,A)||(this.map[x].family.push(""),this.map[x].content.push(""),this.map[x].html.push("</"+A+">")),this.map[x].tag=A,this.map[x].key=x}},ignoreTags:function(a,b){var c=!1;for(var d in a){var e=a[d];0==b.indexOf(e)?c=!0:0==b.indexOf("/"+e)&&(c=!0)}return c},zcont:function(a,b,c){for(var d=0,e=a.length;d<e;d++)if(a[d])if(c){if(a[d]==b)return!0}else if(a[d].toLowerCase()==b.toLowerCase())return!0},get:function(a,b){var c=[],d=a.split(" ");for(var e in d){var f="|",g="",h="";c=[],a=d[e],a.indexOf(".")>-1&&(g=a.substring(a.indexOf(".")+1),a=a.substring(0,a.indexOf("."))),a.indexOf("#")>-1&&(h=a.substring(a.indexOf("#")+1),a=a.substring(0,a.indexOf("#"))),a=a.toLowerCase(),b&&0!=b.length||(b=[{key:""}]);for(var i in b){var j=b[i].key+"~";for(var k in this.map){var l=!1;if(""==j?l=!0:0==(this.map[k].key+"~").indexOf(j)&&(l=!0),l){var m=f.indexOf("|"+k+"|")>-1;if(!m&&1==k.substring(k.lastIndexOf("~")).indexOf(a)){var n=!0;if(""!=g)if(this.map[k].attr&&this.map[k].attr.class){var o=this.map[k].attr.class.replace(" ","|");("|"+o+"|").indexOf("|"+g+"|")==-1&&(n=!1)}else n=!1;""!=h&&(this.map[k].attr&&this.map[k].attr.id?this.map[k].attr.id.indexOf(h)==-1&&(n=!1):n=!1),n&&(f+=k+"|",c.push(this.map[k]))}}}}b=c}return c},clean:function(a){var b={};for(var c in a)if("attr"==c)for(var d in a[c]){var e=d;0==e.indexOf("data-")&&(e=e.substring(5)),"class"!=e&&(b[e]=a[c][d])}return b}};return h.init(),h}var yt_api=document.getElementById("yt_iframe_api");if(!yt_api){var tag=document.createElement("script");tag.src="https://www.youtube.com/iframe_api",tag.id="yt_iframe_api";var firstScriptTag=document.getElementsByTagName("script")[0];firstScriptTag.parentNode.insertBefore(tag,firstScriptTag)}if(config.tubey||config.features&&config.features.add_from_sc&&isEnabled(config.features.add_from_sc)){var sc_api=document.getElementById("sc_sdk");if(!sc_api){var tag=document.createElement("script");tag.src="//connect.soundcloud.com/sdk.js",tag.id="sc_sdk";var firstScriptTag=document.getElementsByTagName("script")[0];firstScriptTag.parentNode.insertBefore(tag,firstScriptTag)}}player.onReady(function(){var a=player.plugins.listy,b=a.state,c=a.defaults;a.tubey={},b.jwp={},b.jwp.version=jwplayer.version;var d=b.jwp.version.split(".");d.length>0&&(b.jwp.major=d[0]),d.length>1&&(b.jwp.minor=d[1]),b.jwp.mode=player.getRenderingMode(),player.getProvider&&(b.jwp.mode=player.getProvider().name),(!config.target||config.target&&""==config.target)&&(config.target=player.id+"_listy"),config.list||(config.list={}),(!config.list.target||config.list.target&&""==config.list.target)&&(config.list.target=config.target+"_list");for(var e in c.list)config.list[e]||(config.list[e]=c.list[e]);config.features||(config.features={}),config.fields=config.features.add&&config.features.add.options&&config.features.add.options.form&&config.features.add.options.form.fields?config.features.add.options.form.fields:{};for(var f in c.fields)config.fields[f]||(config.fields[f]=c.fields[f]);config.dummy_mp4_url&&(a.urls.init_video_url=config.dummy_mp4_url),drawPlaceholders(),configureSkins();var g=player.config||player.getConfig();if(g.file&&"use-tubey"==g.file){a.tubey.pl={get:[],got:{}},a.tubey.controls=player.getControls(),player.setControls(!1),player.load({file:"use-tubey",type:"mp4",image:config.tubey.image?config.tubey.image:"//www.dev.powered-by-haiku.co.uk/solutions/tubey/img/use-tubey.jpg",title:config.tubey.title?config.tubey.title:"Loading the playlist",description:config.tubey.description?config.tubey.description:"Please wait..."}),"string"==typeof config.tubey.playlist?a.tubey.pl.get.push(config.tubey.playlist):a.tubey.pl.get=config.tubey.playlist;for(var h=0,i=a.tubey.pl.get.length;h<i;h++){var j=a.tubey.pl.get[h];getTubeyPlaylist(j,null)}}else"ready"==b.load_type,freshLoad(player.getPlaylist(),"ready","Default")}),player.onError(function(a,b,c){var d=player.plugins.listy,f=(d.state,player.getPlaylistItem());console.info(f)}),player.onPlaylist(function(a){var b=player.plugins.listy,c=b.state,d=player.getPlaylistItem();d&&d.file&&"use-tubey"==d.file||("ready"==c.load_type?(7==parseInt(b.state.jwp.major,10)&&parseInt(b.state.jwp.minor,10)>=5||parseInt(b.state.jwp.major,10)>7?c.load_type="ready75":c.load_type="inner",c.prev_load_type="ready"):"ready75"==c.load_type?(c.load_type="inner",c.prev_load_type="ready"):"inner"==c.load_type||"first"==c.load_type?("ready"==c.prev_load_type&&setTimeout(function(){config.events&&config.events.onReady&&config.events.onReady(b,player)},300),c.load_type="open",c.prev_load_type="inner"):freshLoad(a.playlist,"inner","New playlist")),b.tubey&&b.tubey["try-play"]&&b.tubey["try-play"]===!0&&(setTimeout(function(){player.play()},500),b.tubey["try-play"]=!1)}),player.onBeforePlay(function(){var a=player.plugins.listy,b=a.state,c=player.getPlaylistItem();if(c&&c.file&&"use-tubey"==c.file)player.stop();else{player.config||player.getConfig();if(b.autoplay)b.autoplay=!1,console.info("First Autoplay detect"),setTimeout(function(){player.play()},0);else if(c.action){var e=c.action.split("|");if("next"==e[0]||"prev"==e[0])player.stop(),load(null,getNextPrev(e[1])[e[0]]);else if("firstload"==e[0]||"preview"==e[0]){var f=e[1];"firstload"==e[0]&&(f=b.pl.current[0]),player.stop(),load(null,f)}}else{var g=0;c.mediaid&&(g=c.mediaid),load(null,g)}}}),player.onComplete(function(){var a=player.plugins.listy;a.state;player.stop(),setTimeout(function(){player.playlistItem(2)},0)}),this.about={label:"Listy for JW Player",version:"v1.17",author:"James Herrieven ~ http://powered-by-haiku.co.uk"},this.urls={},this.urls.yt_url="http://www.youtube.com/watch?v=",this.urls.yt_search_url="https://www.googleapis.com/youtube/v3/search?part=snippet",this.urls.yt_playlist_url="https://www.googleapis.com/youtube/v3/playlistItems?part=snippet",this.urls.listy_parse_url="//www.dev.powered-by-haiku.co.uk/solutions/listy/parse/",this.urls.listy_prefetch_url="//www.dev.powered-by-haiku.co.uk/solutions/listy/prefetch/",this.urls.init_video_url="//www.dev.powered-by-haiku.co.uk/solutions/listy/init/dummy.mp4",this.skins={refs:{},data:{}},this.search_toggle={sc:"tracks",yt:"video"},this.refs={},this.state={},this.defaults={list:{label:"Playlist",current_selector:"data-mediaid",start_tpl:'<div class="listy-playlistcontainer"><div class="listy-playlist"><div class="listy-listcontainer"><ul class="listy-pl">',item_tpl:'<li class="listy-item" data-mediaid="{{item.mediaid}}" tabindex="0"><div class="listy-playlistdivider"></div><div class="listy-playlistimg listy-fill" {{(item.image&&item.image!=""?\'style="background-image:url(\'+item.image+\');"\':\'\')}}></div><div class="listy-textwrapper"><span class="listy-title">{{item.title}}<span class="listy-duration">{{(item.duration?timeFormat(item.duration):\'\')}}</span></span>'+"{{(item.description?'<span class=\"listy-description\">'+item.description+'</span>':'')}}</div></li>",end_tpl:"</ul></div></div></div>",yt_start_tpl:'<div class="listy-playlistcontainer"><div class="listy-playlist"><div class="listy-listcontainer"><ul class="listy-pl">',yt_item_tpl:'<li class="listy-item listy-item-yt" data-mediaid="{{item.mediaid}}" data-item="{{Base64.encode(JSON.stringify(item))}}"><div class="listy-playlistdivider"></div><div class="listy-playlistimg listy-fill" {{(item.image&&item.image!=""?\'style="background-image:url(\'+item.image+\');"\':\'\')}}></div><div class="listy-textwrapper"><span class="listy-title">{{item.index}}) {{item.title}}<span class="listy-duration">{{(item.duration?item.duration:\'\')}}</span></span>'+"{{(item.description?'<span class=\"listy-description\">'+item.description+'</span>':'')}}</div></li>",yt_end_tpl:"</ul></div></div></div>",sc_start_tpl:'<div class="listy-playlistcontainer"><div class="listy-playlist"><div class="listy-listcontainer"><ul class="listy-pl">',sc_item_tpl:'<li class="listy-item listy-item-sc" data-mediaid="{{item.mediaid}}" data-item="{{Base64.encode(JSON.stringify(item))}}"><div class="listy-playlistdivider"></div><div class="listy-playlistimg listy-fill" {{(item.image&&item.image!=""?\'style="background-image:url(\'+item.image+\');"\':\'\')}}></div><div class="listy-textwrapper"><span class="listy-title">{{item.index}}) {{item.title}}<span class="listy-duration">{{(item.duration?item.duration:\'\')}}</span></span>'+"{{(item.description?'<span class=\"listy-description\">'+item.description+'</span>':'')}}</div></li>",sc_end_tpl:"</ul></div></div></div>"},fields:{mediaid:{label:"Media ID:"},title:{label:"Title:"},description:{label:"Description:"},image:{label:"Image URL:"},duration:{label:"Duration:"},p1:{type:"paragraph",label:"Media source options"},file_hls:{label:"HLS URL:"},file_rtmp:{label:"RTMP URL:"},file_mp4:{label:"MP4 URL:"},file:{label:"Other URL:"},type:{label:"Other type:",type:"select",options:{mp4:{label:"MP4 (Flash / HTML5)",modes:""},mp3:{label:"MP3 (Flash / HTML5)",modes:""},webm:{label:"WebM (HTML5 only)",modes:{html5:{browser:"chrome,firefox"}}},hls:{label:"HLS (iOS Safari / Mac Safari)",modes:{html5:{browser:"safari",os:"ios"}}},rtmp:{label:"RTMP (Flash only)",modes:"flash"},youtube:{label:"YouTube (Flash / HTML5 JW6.9+)",modes:{html5:{major:"6",minor:"9"}}}}}},sign_in:{email:{label:"Email:"},password:{label:"Password:",type:"password"}},terms_of_use:{label:"Terms of use:",text:"Please confirm you have read our",link_text:"Terms of Use and Privacy Policy",url:"//www.dev.powered-by-haiku.co.uk/terms-of-use/",required:"Please confirm you have read our Terms of Use and Privacy Policy"}},this.checkUserState=function(a,b){var c=player.plugins.listy,d=c.state,e=c.refs,f=config.features.edit&&config.features.edit.options?config.features.edit.options:{},g=!(!f.load||!f.load.onLogin)&&isEnabled(f.load.onLogin),h=f.load&&f.load.onLogin&&f.load.onLogin.default?f.load.onLogin.default:"",i=f.save&&f.save.default?f.save.default:top.document.location.host,j=document.getElementById(config.target+"_save");c.isLoggedIn()?(e[player.id+"_listy_edit_name"]&&(e[player.id+"_listy_edit_name"].value=i),d.pl&&(d.pl.name=i),g?""!=h||b&&""!=b.name?(""==h&&(h=b.name),c.loadListyByName(h)):c.loadListy():isEnabled(f.load)&&updateMyListys(),addClass(e.sign_in,"listy-hidden"),removeClass(e.sign_out,"listy-hidden"),a&&toggleTabs(null,[null,a]),d.edit_playlist===!0&&j&&removeClass(j,"listy-hidden")):(addClass(e.sign_out,"listy-hidden"),removeClass(e.sign_in,"listy-hidden"),!d.edit_playlist==!0&&j&&addClass(j,"listy-hidden"))},this.prefetchItem=function(a,b,c,d,e){b=b||config.prefetch.begin,c=c||config.prefetch.progress,d=d||config.prefetch.complete,e=e||config.prefetch.error,prefetch(a,b,c,d,e)},this.setPlaylistName=function(a){var b=player.plugins.listy,c=b.state;c.pl.name=a},this.isLoggedIn=function(){var a=player.plugins.listy,b=a.state,c=!1;return b.listy_parse?b.listy_parse.currentUser()&&(c=!0):top.console&&console.info("Listy // No listy parse"),c},this.loadListy=function(a){loadListy(null,[a])},this.loadListyByName=function(a){loadListyByName(a)},this.buildCustomItem=buildCustomItem,this.addItem=function(a,b){a=a||"last";var c=b?"direct":"custom";add(null,[c,a,b])},this.addItems=function(a){"string"==typeof a&&(a=JSON.parse(a));for(var b=0,c=a.length;b<c;b++)add(null,["direct","last",a[b]])},this.listyUI_shufflePlaylist=function(){var a=player.plugins.listy,b=a.state,c=shufflePL(),d=b.current_item;updateListy(c,d)},this.sortPlaylist=function(a){var b=player.plugins.listy,c=b.state,d=sortPL(a);return c.pl.current=d,b.getPlaylist()},this.shufflePlaylist=function(){var a=player.plugins.listy,b=a.state,c=shufflePL();return b.pl.current=c,a.getPlaylist()},this.listyUI_exportPlaylist=function(a,b){var c=player.plugins.listy,e=(c.state,c.skins.data),f=getSkinURL(),g=c.skins.refs[f];b=b||(config.features.export.type?config.features.export.type:"json");var h="width=500;height=400;menubar=no;location=no;",i=window.open("","listy_export",h);i.focus(),i.resizeTo(500,400),i.document.open();var j="";j+="<html><head>",j+='<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">',j+='<meta name="viewport" content="width=device-width,initial-scale=1.0" />',j+="<title>Export playlist</title>",j+="<style>",j+="*{box-sizing:border-box;}",j+="body{",j+="background-color:#"+checkColor(e[g].backgroundcolor)+";",j+="background-image:url("+e[g].itemActive+");",j+="font:"+e[g].fontsize+"px Arial, Helvetica, sans-serif;",j+="background-size:100% 100%;",j+="}",j+="textarea{position:absolute;top:53px;left:0;width:100%;bottom:0;resize:none;}",j+=".listy-button{",j+="float:left;",j+="background-color:#"+checkColor(e[g].titlecolor)+";",j+="background-image:url("+e[g].itemActive+");",j+="background-size: cover;",j+="color:#"+checkColor(e[g].fontcolor)+";",j+="font-size:"+e[g].titlesize+"px;",j+="font-weight:"+e[g].titleweight+";",j+="line-height:18px;",j+="padding:5px;",j+="margin:4px;",j+="cursor:pointer;",j+="border-radius:5px;",j+="border:2px solid #"+checkColor(e[g].titlecolor)+";",j+="}",j+=".listy-button:hover,.listy-button.active{",j+="background-image: url("+e[g].item+");",j+="color:#"+checkColor(e[g].titleactivecolor)+";",j+="}",j+=".listy-button.listy-right{float: right;}",j+="</style>",j+="</head><body>",j+='<span class="listy-button'+("json"==b?" active":"")+'" id="'+player.id+'_listy_export_json" onclick="setT(\'json\');" tabindex="0">JSON</span>',j+='<span class="listy-button'+("rss"==b?" active":"")+'" id="'+player.id+'_listy_export_rss" onclick="setT(\'rss\');" tabindex="0">RSS</span>',j+='<span class="listy-button listy-right" onclick="self.close();" tabindex="0">Close</span>',j+="<textarea></textarea>",j+="<script>",j+="function setT(sType){",j+='var selector = document.querySelectorAll(".listy-button");',j+="for(var iS=0,iSE=selector.length;iS<iSE;iS++){",j+='if(selector[iS].id!="'+player.id+'_listy_export_"+sType){',j+='self.opener.jwplayer("'+player.id+'").plugins.listy.removeClass(selector[iS],"active");',j+="} else {",j+='self.opener.jwplayer("'+player.id+'").plugins.listy.addClass(selector[iS],"active");',j+="}",j+="}",j+='var oT = document.getElementsByTagName("textarea")[0];',j+='if(oT) oT.value = self.opener.jwplayer("'+player.id+'").plugins.listy.exportPlaylist(sType);',j+="}",j+="setT('"+b+"');",j+="</script>",j+="</body></html>",i.document.write(j),i.document.close()},this.exportPlaylist=function(a){var b=player.plugins.listy;b.state;a=a||"json";var d="";if("json"==a)d+=JSON.stringify(b.getPlaylist());else if("rss"==a){var e=b.getPlaylist();d+='<?xml version="1.0" encoding="UTF-8"?>\n',d+='<rss version="2.0" xmlns:jwplayer="http://rss.jwpcdn.com/">\n',d+="<channel>\n";for(var f=0,g=e.length;f<g;f++){var h=e[f];d+="<item>\n",d+="<title>"+(h.title?h.title:"")+"</title>\n",d+="<description>"+(h.description?h.description:"")+"</description>\n",d+="<guid>"+(h.mediaid?h.mediaid:"")+"</guid>\n",d+="<jwplayer:image>"+(h.image?h.image:"")+"</jwplayer:image>\n";var i=h.sources;if(i&&i.length>0)for(var j=0,k=i.length;j<k;j++){var l=i[j];d+='<jwplayer:source file="'+l.file+'"',d+=l.label?' label="'+l.label+'"':"",d+=l.type?' type="'+l.type+'"':"",d+=l.default?' default="'+l.default+'"':"",d+=" />\n"}else d+='<jwplayer:source file="'+h.file+'"',d+=h.label?' label="'+h.label+'"':"",d+=h.type?' type="'+h.type+'"':"",d+=h.default?' default="'+h.default+'"':"",d+=" />\n";var m=h.tracks;if(m)for(var n=0,o=m.length;n<o;n++){var p=m[n];d+='<jwplayer:source file="'+p.file+'"',d+=p.label?' label="'+p.label+'"':"",d+=p.kind?' kind="'+p.kind+'"':"",d+=p.default?' default="'+p.default+'"':"",d+=" />\n"}d+="</item>\n"}d+="</channel>\n",d+="</rss>"}return d},this.getPlaylist=function(a){var b=player.plugins.listy,c=b.state;a=a||"current";for(var d=[],e=0,f=c.pl[a].length;e<f;e++){var g=c.pl[a][e],h=c.pl.master[g];d.push(h)}return d},this.getPlaylistIndex=function(){var a=player.plugins.listy,b=a.state;return getIndex(b.current_item)},this.getPlaylistItem=function(a){var b=player.plugins.listy,c=b.state;a||(a=b.getPlaylistIndex());var d=a>c.pl.current.length-1?c.pl.current[0]:c.pl.current[a];return c.pl.master[d]},this.playlistItem=function(a){load(null,[a])},this.load=function(a){player.load(a)},this.saveListy=function(a){var b=player.plugins.listy,c=b.state;b.isLoggedIn()?c.listy_parse.saveListy(c.pl,function(b){c.pl.id=b,updateMyListys(),a&&a()}):alert("You need to be logged into Listy before saving the current playlist")},this.listyUI_searchPlaylist=function(a){var b=player.plugins.listy,c=b.refs,d=b.state;if(d.pl.filtered=[],a&&""!=a){for(var e=b.searchPlaylist(a),f=0,g=e.length;f<g;f++)d.pl.filtered.push(e[f].mediaid);drawListy(null,"filtered")}else removeClass(c[player.id+"_listy_pl_search_button"],"with-content"),drawListy()},this.searchPlaylist=function(a){var b=player.plugins.listy,c=b.state,d=[];if(a&&""!=a)for(var e=0,f=c.pl.current.length;e<f;e++){var g=c.pl.current[e],h=c.pl.master[g],i="";for(var j in h)"string"==typeof h[j]?i+=h[j].toLowerCase()+" ":h[j]&&(i+=JSON.stringify(h[j]).toLowerCase()+" ");i.indexOf(a.toLowerCase())>-1&&d.push(h)}return d},this.listyUI_searchYT=function(a,b){var c=player.plugins.listy,d=c.refs;c.searchYT(a,function(a,b,c,e){var f="";if(0==a.length)d[player.id+"_listy_yt_results"].innerHTML="No matches found";else{c&&(f+=uiButton(config.target+"_listy_yt_results_prev","&lt; prev","listy-results-prev-page","prev||"+c+"||"+b)),e&&(f+=uiButton(config.target+"_listy_yt_results_next","next &gt;","listy-results-next-page","next||"+e+"||"+b)),(c||e)&&(f+=uiSep()),f+=repStuff(config.list.yt_start_tpl,player,null);for(var g=0,h=a.length;g<h;g++)f+=repStuff(config.list.yt_item_tpl,player,a[g]);f+=repStuff(config.list.yt_end_tpl,player,null),d[player.id+"_listy_yt_results"].innerHTML=f,bindYTButtons()}},b)},this.listyUI_searchSC=function(a,b){var c=player.plugins.listy,d=c.refs;c.searchSC(a,function(a,b,c,e){var f="";if(0==a.length)d[player.id+"_listy_sc_results"].innerHTML="No matches found";else{null!=c&&(f+=uiButton(config.target+"_listy_sc_results_prev","&lt; prev","listy-results-prev-page","prev||"+c+"||"+b)),null!=e&&(f+=uiButton(config.target+"_listy_sc_results_next","next &gt;","listy-results-next-page","next||"+e+"||"+b)),null==c&&null==e||(f+=uiSep()),f+=repStuff(config.list.sc_start_tpl,player,null);for(var g=0,h=a.length;g<h;g++)f+=repStuff(config.list.sc_item_tpl,player,a[g]);f+=repStuff(config.list.sc_end_tpl,player,null),d[player.id+"_listy_sc_results"].innerHTML=f,bindSCButtons()}},b)},this.searchSC=function(a,b,c){var d=player.plugins.listy,f=(d.refs,"86bf79b8e1c58a9395d745aaa9f52652");if(b)if(window.SC){SC.initialize({client_id:f});var g={};if(g.limit=50,g.linked_partitioning=1,g.streamable=!0,config.features.add_from_sc&&config.features.add_from_sc.query_options)for(var h in config.features.add_from_sc.query_options)g[h]=config.features.add_from_sc.query_options[h];g.q=a,c&&(g.offset=c),SC.get("/tracks",g,function(c){var d=null,e=null,g=c.collection?c.collection:c;if(c.next_href){for(var h=c.next_href.split("&"),i={},j=0,k=h.length;j<k;j++){var l=h[j].split("=");i[l[0]]=l[1]}i.offset&&(d=i.offset,i.limit&&parseInt(i.offset,10)>parseInt(i.limit,10)&&(e=parseInt(i.offset,10)-2*parseInt(i.limit,10)))}for(var m=[],n=0,o=g.length;n<o;n++){var p=g[n];if(p&&(p.streamable||p.downloadable)){var q={};q.index=n+1,q.type="mp3",q.mediaid="sc"+p.id,q.duration=timeFormat(p.duration/1e3),q.image=p.artwork_url;var r=p.title;r=r.replace(/[\u2018\u2019]/g,"'").replace(/[\u201C\u201D]/g,'"'),r=r.replace(/[\u2013\u2014]/g,"-").replace(/[\u2026]/g,"..."),q.title=r,q.file=(p.streamable?p.stream_url:q.download_url)+"?client_id="+f,p.downloadable&&(q.download_url=p.download_url+"?client_id="+f),p.waveform_url&&(q.waveform_url=p.waveform_url),m.push(q)}}b(m,a,e,d)})}else top.console&&console.info("Listy // Oops! SC not available");else top.console&&console.info('Listy // Oops! "searchSC" requires a callback function as the second parameter.')},this.searchYT=function(a,b,c){var d=player.plugins.listy,f=(d.refs,d.search_toggle.yt);if(b){var g=d.urls.yt_search_url,h={};if(h.key="AIzaSyCHDHSAytHzHm8HiUlEQImeWqTeVbehnNI",h.type=f,h.maxResults=50,"video"==f&&(h.videoEmbeddable="true",h.videoSyndicated="true"),config.features.add_from_yt&&config.features.add_from_yt.query_options)for(var i in config.features.add_from_yt.query_options)h[i]=config.features.add_from_yt.query_options[i];h.q=a,c&&(h.pageToken=c);for(var i in h)g+="&"+i+"="+h[i];getURL(g,function(c){var d=JSON.parse(c),e=[];if(d.items&&d.items.length>0)for(var f=0,g=d.items.length;f<g;f++){var h=d.items[f],i={};i.index=f+1,i.type="youtube",i.mediaid=h.id.videoId;var j=h.snippet.thumbnails?h.snippet.thumbnails.high?h.snippet.thumbnails.high:h.snippet.thumbnails.medium?h.snippet.thumbnails.medium:h.snippet.thumbnails.default:"";i.image=j.url;var k=h.snippet.title;k=k.replace(/[\u2018\u2019]/g,"'").replace(/[\u201C\u201D]/g,'"'),k=k.replace(/[\u2013\u2014]/g,"-").replace(/[\u2026]/g,"..."),i.title=k,i.description="",e.push(i)}b(e,a,d.prevPageToken?d.prevPageToken:null,d.nextPageToken?d.nextPageToken:null)})}else top.console&&console.info('Listy // Oops! "searchYT" requires a callback function as the second parameter.')},this.previewItem=function(a,b){preview(null,[a,b])},this.loadItem=function(a){load(null,[a])},this.listyUI_editPlaylist=function(a){var b=player.plugins.listy,c=b.state,d=b.refs;if(b.editPlaylist(a),d[player.id+"_listy_pl_edit"]){var e=document.getElementById(config.target+"_save");c.edit_playlist===!0?(addClass(d[player.id+"_listy_pl_edit"],"active"),b.isLoggedIn()&&e&&removeClass(e,"listy-hidden")):(e&&addClass(e,"listy-hidden"),removeClass(d[player.id+"_listy_pl_edit"],"active"),hideEdits())}},this.editPlaylist=function(a){var b=player.plugins.listy,c=b.state;a===!0||a===!1?c.edit_playlist=a:!c.edit_playlist==!0?c.edit_playlist=!0:c.edit_playlist=!1},this.removeItem=function(a){remove(null,[a])},this.removeClass=removeClass,this.addClass=addClass,this.bind=bind,Base64={CA:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",CAS:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",IA:new Array(256),IAS:new Array(256),init:function(){var a;for(a=0;a<256;a++)Base64.IA[a]=-1,Base64.IAS[a]=-1;for(a=0,iS=Base64.CA.length;a<iS;a++)Base64.IA[Base64.CA.charCodeAt(a)]=a,Base64.IAS[Base64.CAS.charCodeAt(a)]=a;Base64.IA["="]=Base64.IAS["="]=0},encode:function(a,b){var c,d,e,f,g,h,i,j,k,l;for(c=b?Base64.CAS:Base64.CA,e=a.constructor==Array?a:Base64.toByteArray(a),f=e.length,g=3*Math.floor(f/3),h=Math.floor((f-1)/3)+1<<2,d=new Array(h),i=0,j=0;i<g;)l=(255&e[i++])<<16|(255&e[i++])<<8|255&e[i++],d[j++]=c.charAt(l>>18&63),d[j++]=c.charAt(l>>12&63),d[j++]=c.charAt(l>>6&63),d[j++]=c.charAt(63&l);return k=f-g,k>0&&(l=(255&e[g])<<10|(2==k?(255&e[f-1])<<2:0),d[h-4]=c.charAt(l>>12),d[h-3]=c.charAt(l>>6&63),d[h-2]=2==k?c.charAt(63&l):"=",d[h-1]="="),d.join("")},decode:function(a,b){var c,d,e,f,g,h,i,j,k,l,m,n,o,q,r,s;for(c=b?Base64.IAS:Base64.IA,a.constructor==Array?(e=a,g=!0):(e=Base64.toByteArray(a),g=!1),f=e.length,h=0,i=f-1;h<i&&c[e[h]]<0;)h++;for(;i>0&&c[e[i]]<0;)i--;for(j="="==e[i]?"="==e[i-1]?2:1:0,k=i-h+1,l=f>76?("\r"==e[76]?Math.floor(k/78):0)<<1:0,m=(6*(k-l)>>3)-j,d=new Array(m),n=0,o=0,eLen=3*Math.floor(m/3);n<eLen;)q=c[e[h++]]<<18|c[e[h++]]<<12|c[e[h++]]<<6|c[e[h++]],d[n++]=q>>16&255,d[n++]=q>>8&255,d[n++]=255&q,l>0&&19==++o&&(h+=2,o=0);if(n<m){for(q=0,r=0;h<=i-j;r++)q|=c[e[h++]]<<18-6*r;for(s=16;n<m;s-=8)d[n++]=q>>s&255}if(g)return d;for(var q=0;q<d.length;q++)d[q]=String.fromCharCode(d[q]);return d.join("")},toByteArray:function(a){for(var c,b=[],d=0;d<a.length;d++)c=a.charCodeAt(d),b.push(c);return b}},Base64.init()};jwplayer().registerPlugin("listy","6.0",template)}(jwplayer);
